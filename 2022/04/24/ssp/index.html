<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"invincible-nerd.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="1. cfgcenter1.1 cfg-api理论上，给gdsinsing的其它地方直接使用，只需要调用接口，无需重复实现 12345678910public interface ICfgService &amp;#123;	&#x2F;&#x2F;根据编号查找一个配置	public String getCfgString(String code) throws BusException;		public Integer g">
<meta property="og:type" content="article">
<meta property="og:title" content="ssp">
<meta property="og:url" content="http://invincible-nerd.github.io/2022/04/24/ssp/index.html">
<meta property="og:site_name" content="IVN">
<meta property="og:description" content="1. cfgcenter1.1 cfg-api理论上，给gdsinsing的其它地方直接使用，只需要调用接口，无需重复实现 12345678910public interface ICfgService &amp;#123;	&#x2F;&#x2F;根据编号查找一个配置	public String getCfgString(String code) throws BusException;		public Integer g">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-04-25T01:20:03.000Z">
<meta property="article:modified_time" content="2022-11-29T07:25:01.858Z">
<meta property="article:author" content="invincible-nerd">
<meta property="article:tag" content="Springboot">
<meta property="article:tag" content="Mybatis">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://invincible-nerd.github.io/2022/04/24/ssp/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>ssp | IVN</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">IVN</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://invincible-nerd.github.io/2022/04/24/ssp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="invincible-nerd">
      <meta itemprop="description" content="For explorer everywhere">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IVN">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          ssp
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-04-25 09:20:03" itemprop="dateCreated datePublished" datetime="2022-04-25T09:20:03+08:00">2022-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-29 15:25:01" itemprop="dateModified" datetime="2022-11-29T15:25:01+08:00">2022-11-29</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Project/" itemprop="url" rel="index"><span itemprop="name">Project</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>81k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1:14</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-cfgcenter"><a href="#1-cfgcenter" class="headerlink" title="1. cfgcenter"></a>1. cfgcenter</h1><h2 id="1-1-cfg-api"><a href="#1-1-cfg-api" class="headerlink" title="1.1 cfg-api"></a>1.1 cfg-api</h2><p>理论上，给gdsinsing的其它地方直接使用，只需要调用接口，无需重复实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ICfgService</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//根据编号查找一个配置</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getCfgString</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> Integer <span class="title function_">getCfgInteger</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> Date <span class="title function_">getCfgDate</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="1-2-cfg-provider"><a href="#1-2-cfg-provider" class="headerlink" title="1.2 cfg-provider"></a>1.2 cfg-provider</h2><h3 id="1-2-1-CfgServiceImpl-java"><a href="#1-2-1-CfgServiceImpl-java" class="headerlink" title="1.2.1 CfgServiceImpl.java"></a>1.2.1 CfgServiceImpl.java</h3><p>理论上，provider实现api的接口，用于分布式，其它模块直接调用api即可</p>
<p>目前没用上，还是必须在其它模块的pom里<dependency>provider</dependency></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CfgServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ICfgService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IGdssCfgTeConfigService iGdssCfgTeConfigService;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getCfgString</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="type">GdssCfgTeConfig</span> <span class="variable">value</span> <span class="operator">=</span> iGdssCfgTeConfigService.getEntityByCode(code);</span><br><span class="line">      <span class="keyword">if</span> (value == <span class="literal">null</span>)&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> value.getCfgValue();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Integer <span class="title function_">getCfgInteger</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="type">String</span> <span class="variable">val</span> <span class="operator">=</span> <span class="built_in">this</span>.getCfgString(code);</span><br><span class="line">      <span class="keyword">return</span> Integer.valueOf(val);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Date <span class="title function_">getCfgDate</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         <span class="type">String</span> <span class="variable">val</span> <span class="operator">=</span> <span class="built_in">this</span>.getCfgString(code);</span><br><span class="line">         <span class="keyword">return</span> DateUtil.string2Date(val);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">         ex.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="1-2-2-CfgcenterProviderApp"><a href="#1-2-2-CfgcenterProviderApp" class="headerlink" title="1.2.2 CfgcenterProviderApp"></a>1.2.2 CfgcenterProviderApp</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;cn.lll.**.mapper&quot;)</span></span><br><span class="line"><span class="meta">@ServletComponentScan(value = &#123;&quot;cn.lll.cfgcenter&quot; &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CfgcenterProviderApp</span> <span class="keyword">implements</span> <span class="title class_">ApplicationRunner</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(CfgcenterProviderApp.class);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">      <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> SpringApplication.run(CfgcenterProviderApp.class, args);</span><br><span class="line">      SpringUtil.setApplicationContext(context);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">      log.info(<span class="string">&quot;************************************************************* CfgcenterProviderApp 启动完成!&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>Spring boot 框架注解</li>
</ol>
<h3 id="1-2-3-TestCfgService-java"><a href="#1-2-3-TestCfgService-java" class="headerlink" title="1.2.3 TestCfgService.java"></a>1.2.3 TestCfgService.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest(classes = CfgcenterProviderApp.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestCfgService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(TestCfgService.class);</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ICfgService iCfgService;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Before</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">start</span><span class="params">()</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;开始&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@After</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">end</span><span class="params">()</span>&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;结束&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetCfgString</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> <span class="string">&quot;001&quot;</span>;</span><br><span class="line">         </span><br><span class="line">         <span class="type">String</span> <span class="variable">val</span> <span class="operator">=</span> iCfgService.getCfgString(code);</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">if</span>(val.equals(<span class="string">&quot;测试&quot;</span>))&#123;</span><br><span class="line">            Assert.assertTrue(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         Assert.assertTrue(<span class="literal">false</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         Assert.assertTrue(<span class="literal">false</span>);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>Spring boot 框架注解</li>
</ol>
<h2 id="1-3-cfg-dao"><a href="#1-3-cfg-dao" class="headerlink" title="1.3 cfg-dao"></a>1.3 cfg-dao</h2><p>一张数据库表，一个xml，一个mapper，一个model，一个service，一个serviceImpl</p>
<p>​                        </p>
<h3 id="1-3-1-xml-mybatis-GdssCfgTeConfig-xml"><a href="#1-3-1-xml-mybatis-GdssCfgTeConfig-xml" class="headerlink" title="1.3.1 xml    mybatis-GdssCfgTeConfig.xml"></a>1.3.1 xml    mybatis-GdssCfgTeConfig.xml</h3><p>1.主体是个<mapper> </mapper>, namespace指定sql功能对应的mapper接口，每个sql功能和接口中的方法一一对应</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.lll.cfgcenter.mapper.IGdssCfgTeConfigMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>常用的CRUD操作由<insert></insert>,  <select></select>, <update></update>,<delete></delete>定义好以备试用，id和mapper接口中的方法名对应</p>
<p><parameterType> 输入参数类型</p>
<p><resultType> <resultMap> 输出参数类型</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delEntity&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">   DELETE FROM</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;TableName&quot;</span> /&gt;</span></span><br><span class="line">   WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.<resultMap></resultMap>指定sql操作的结果集，由type指定路径，将数据库表中的记录ORM映射到model中定义的java bean</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;GdssCfgTeConfigMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.lll.cfgcenter.model.GdssCfgTeConfig&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;ID&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;CHAR&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--      &lt;result column=&quot;ID&quot; property=&quot;id&quot; jdbcType=&quot;CHAR&quot; javaType=&quot;String&quot; /&gt;--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;CODE&quot;</span> <span class="attr">property</span>=<span class="string">&quot;code&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;CFG_VALUE&quot;</span> <span class="attr">property</span>=<span class="string">&quot;cfgValue&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;REMARK&quot;</span> <span class="attr">property</span>=<span class="string">&quot;remark&quot;</span> <span class="attr">jdbcType</span>=<span class="string">&quot;VARCHAR&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">javaType</span>=<span class="string">&quot;String&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>3.<sql></sql>自定义可重用的sql语句，减少重复工作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;TableName&quot;</span>&gt;</span>GDSS_CFG_TE_CONFIG<span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delEntity&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;java.lang.String&quot;</span>&gt;</span></span><br><span class="line">   DELETE FROM</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;TableName&quot;</span> /&gt;</span></span><br><span class="line">   WHERE ID = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;Base_Column_List&quot;</span>&gt;</span></span><br><span class="line">   ID,CODE,CFG_VALUE,REMARK</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addEntity&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.lll.cfgcenter.model.GdssCfgTeConfig&quot;</span>&gt;</span></span><br><span class="line">   INSERT INTO</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;TableName&quot;</span> /&gt;</span></span><br><span class="line">   (</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;Base_Column_List&quot;</span> /&gt;</span></span><br><span class="line">   )</span><br><span class="line">   VALUES</span><br><span class="line">   (#&#123;id,jdbcType=CHAR&#125;,#&#123;code,jdbcType=VARCHAR&#125;,#&#123;cfgValue,jdbcType=VARCHAR&#125;,#&#123;remark,jdbcType=VARCHAR&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>这个id&#x3D;”condition”的可重用sql语句较长：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;condition&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span>AND ID = #&#123;id&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;code != null&quot;</span>&gt;</span>AND CODE = #&#123;code&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;cfgValue != null&quot;</span>&gt;</span>AND CFG_VALUE = #&#123;cfgValue&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;remark != null&quot;</span>&gt;</span>AND REMARK = #&#123;remark&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id_like != null&quot;</span>&gt;</span>AND ID LIKE &quot;%&quot;#&#123;id_like&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;code_like != null&quot;</span>&gt;</span>AND CODE LIKE &quot;%&quot;#&#123;code_like&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;cfgValue_like != null&quot;</span>&gt;</span>AND CFG_VALUE LIKE &quot;%&quot;#&#123;cfgValue_like&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;remark_like != null&quot;</span>&gt;</span>AND REMARK LIKE &quot;%&quot;#&#123;remark_like&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>但需要使用时可大大减轻工作量：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delEntityByParam&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;cn.lll.cfgcenter.model.GdssCfgTeConfig&quot;</span>&gt;</span></span><br><span class="line">   DELETE FROM</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;TableName&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;condition&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li><p>id_like等like没什么用</p>
</li>
<li><p>ID LIKE “%”#{id_like}”%”，左右加百分号，表示左右都可有0-无穷个字符，用于模糊查询</p>
</li>
</ol>
<p>自定义查询, id&#x3D;”vagueCondition”    &#x2F;&#x2F;没什么用</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;vagueCondition&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;id != null&quot;</span>&gt;</span>AND ID LIKE &quot;%&quot;#&#123;id&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;code != null&quot;</span>&gt;</span>AND CODE LIKE &quot;%&quot;#&#123;code&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;cfgValue != null&quot;</span>&gt;</span>AND CFG_VALUE LIKE &quot;%&quot;#&#123;cfgValue&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;remark != null&quot;</span>&gt;</span>AND REMARK LIKE &quot;%&quot;#&#123;remark&#125;&quot;%&quot;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;vagueCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;java.lang.Integer&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">parameterType</span>=<span class="string">&quot;cn.lll.cfgcenter.model.param.GdssCfgTeConfigParam&quot;</span>&gt;</span></span><br><span class="line">   SELECT COUNT(0) FROM</span><br><span class="line">   <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;TableName&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;vagueCondition&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="1-3-2-mapper-IGdssCfgTeConfigMapper-java"><a href="#1-3-2-mapper-IGdssCfgTeConfigMapper-java" class="headerlink" title="1.3.2 mapper    IGdssCfgTeConfigMapper.java"></a>1.3.2 mapper    IGdssCfgTeConfigMapper.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IGdssCfgTeConfigMapper</span> <span class="keyword">extends</span> <span class="title class_">ILllBaseMapper</span>&lt;GdssCfgTeConfig&gt; &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">vagueCount</span><span class="params">(GdssCfgTeConfigParam param)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> List&lt;GdssCfgTeConfig&gt; <span class="title function_">vagueSearch</span><span class="params">(GdssCfgTeConfigParam param)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@description</span>:根据id数组，批量删除</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> idList</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@exception</span> </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="type">int</span> <span class="title function_">batchDelete</span><span class="params">(<span class="meta">@Param(&quot;idList&quot;)</span> List&lt;String&gt; idList)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ILllBaseMapper</span>&lt;T&gt; &#123;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addEntity</span><span class="params">(T entity)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delEntity</span><span class="params">(String id)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delEntityByParam</span><span class="params">(T params)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateEntity</span><span class="params">(T entity)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> T <span class="title function_">getEntityById</span><span class="params">(String id)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   <span class="keyword">public</span> T <span class="title function_">getEntity</span><span class="params">(T params)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">searchEntity</span><span class="params">(T params)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">count</span><span class="params">()</span> <span class="keyword">throws</span> Exception; </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">countByParam</span><span class="params">(T params)</span> <span class="keyword">throws</span> Exception;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>在Springboot, mybatis中，mapper无需手动写实现类</li>
<li>mapper接口中的方法名需要与xml中的CRUD标签的id保持一致，mybatis才能自动对应上</li>
<li>mapper只用于数据库表ORM映射到model，为mybatis专用，别无他用！</li>
</ol>
<h3 id="1-3-3-model-GdssCfgConfig-java"><a href="#1-3-3-model-GdssCfgConfig-java" class="headerlink" title="1.3.3 model    GdssCfgConfig.java"></a>1.3.3 model    GdssCfgConfig.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">LllBaseModel</span> <span class="keyword">implements</span> <span class="title class_">IAbleJson</span>,Cloneable</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GdssCfgTeConfig</span> <span class="keyword">extends</span> <span class="title class_">LllBaseModel</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> String id;</span><br><span class="line">   <span class="keyword">private</span> String code;</span><br><span class="line">   <span class="keyword">private</span> String cfgValue;</span><br><span class="line">   <span class="keyword">private</span> String remark;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">private</span> String id_like;</span><br><span class="line">   <span class="keyword">private</span> String code_like;</span><br><span class="line">   <span class="keyword">private</span> String cfgValue_like;</span><br><span class="line">   <span class="keyword">private</span> String remark_like;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getId</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.id;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(String id)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.id = id;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.code;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(String code)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.code = code;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getCfgValue</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.cfgValue;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCfgValue</span><span class="params">(String cfgValue)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.cfgValue = cfgValue;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getRemark</span><span class="params">()</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.remark;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemark</span><span class="params">(String remark)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.remark = remark;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIdLike</span><span class="params">(String id)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.id_like = id;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCodeLike</span><span class="params">(String code)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.code_like = code;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCfgValueLike</span><span class="params">(String cfgValue)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.cfgValue_like = cfgValue;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRemarkLike</span><span class="params">(String remark)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.remark_like = remark;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getPkidValue</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPkidValue</span><span class="params">(String id)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.id = id;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>model里的java bean中的参数可以包含数据库表中没有的字段， 但数据库表中的每个字段model里的java bean都必须一一对应！</li>
<li>model里的java bean中基本数据类型字段要用包装类，不要用int，用Integer，和mybatis中定义相一致！</li>
</ol>
<h3 id="1-3-4-service-IGdssCfgConfigService-java-GdssCfgTeConfigServiceImpl-java"><a href="#1-3-4-service-IGdssCfgConfigService-java-GdssCfgTeConfigServiceImpl-java" class="headerlink" title="1.3.4 service    IGdssCfgConfigService.java, GdssCfgTeConfigServiceImpl.java"></a>1.3.4 service    IGdssCfgConfigService.java, GdssCfgTeConfigServiceImpl.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ILllDbRedisBaseService</span>&lt;T&gt; &#123;</span><br><span class="line">    T <span class="title function_">addEntity</span><span class="params">(T entity)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">    <span class="comment">//arg依照业务，可为usrId,account等</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">delEntityById</span><span class="params">(String id, String arg)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateEntityById</span><span class="params">(T t, String id, String arg)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">    T <span class="title function_">getEntityById</span><span class="params">(String id)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">    T <span class="title function_">getEntity</span><span class="params">(T params)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">    List&lt;T&gt; <span class="title function_">searchEntity</span><span class="params">(<span class="type">int</span> pagesize, <span class="type">int</span> pageno)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">    List&lt;T&gt; <span class="title function_">searchEntity</span><span class="params">(T params,<span class="type">int</span> pagesize,<span class="type">int</span> pageno)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">count</span><span class="params">()</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">count</span><span class="params">(T params)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IGdssCfgTeConfigService</span> <span class="keyword">extends</span> <span class="title class_">ILllDbRedisBaseService</span>&lt;GdssCfgTeConfig&gt; &#123;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">vagueCount</span><span class="params">(GdssCfgTeConfigParam param)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> List&lt;GdssCfgTeConfig&gt; <span class="title function_">vagueSearch</span><span class="params">(GdssCfgTeConfigParam param, <span class="type">int</span> pagesize, <span class="type">int</span> pageno)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">public</span> GdssCfgTeConfig <span class="title function_">getEntityByCode</span><span class="params">(String code)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">   <span class="type">int</span> <span class="title function_">batchDelete</span><span class="params">(List&lt;String&gt; idList)</span> <span class="keyword">throws</span> BusException;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">void</span> <span class="title function_">reloadAllConfCache</span><span class="params">()</span> <span class="keyword">throws</span> BusException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>MVC 是一种使用 MVC（Model View Controller 模型-视图-控制器）设计创建 Web 应用程序的模式：</p>
<ul>
<li>Model（模型）表示应用程序核心（如数据库）。</li>
<li>View（视图）显示效果（HTML页面）。</li>
<li>Controller（控制器）处理输入（业务逻辑）。</li>
</ul>
<p><strong>Model（模型）</strong>是应用程序中用于处理应用程序数据逻辑的部分。<br> 　通常模型对象负责在数据库中存取数据。</p>
<p><strong>View（视图）</strong>是应用程序中处理数据显示的部分。<br> 　通常视图是依据模型数据创建的。</p>
<p><strong>Controller（控制器）</strong>是应用程序中处理用户交互的部分。<br> 　通常控制器负责从视图读取数据，控制用户输入，并向模型发送数据。</p>
<p>注意：</p>
<ol>
<li>虽然本package名为service，但是仍然属于dao层&#x2F;持久层&#x2F;Model层，而不是业务层&#x2F;Controller层！</li>
<li>serviceImpl中@Autowired自动装载了mapper：<code>private IGdssCfgTeConfigMapper iGdssCfgTeConfigMapper;</code></li>
<li>serviceImpl中的方法实现，直接调用mapper接口中的方法，mybatis自动对应到xml中相应的sql语句：例如delEntityById中调用了mapper接口里的delEntity</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">delEntityById</span><span class="params">(String id, String code)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">   <span class="keyword">if</span> (StringUtil.isEmpty(id))&#123;</span><br><span class="line">      log.error(<span class="string">&quot;id can not be empty&quot;</span>);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusException</span>(<span class="string">&quot;DaoService&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">try</span>&#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">rows</span> <span class="operator">=</span> iGdssCfgTeConfigMapper.delEntity(id);</span><br><span class="line">      <span class="keyword">if</span> (rows &gt; <span class="number">0</span>)&#123;</span><br><span class="line">         flushCache(<span class="literal">null</span>, id, <span class="literal">true</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> rows;</span><br><span class="line">   &#125;<span class="keyword">catch</span>(Exception ex)&#123;</span><br><span class="line">      log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusException</span>(<span class="string">&quot;DaoService&quot;</span>,ex);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>









<h1 id="2-app-ssp-mgr-module-conf"><a href="#2-app-ssp-mgr-module-conf" class="headerlink" title="2. app-ssp-mgr-module-conf"></a>2. app-ssp-mgr-module-conf</h1><h2 id="2-1-controller"><a href="#2-1-controller" class="headerlink" title="2.1 controller"></a>2.1 controller</h2><p>ConfController调用ConfService</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ConfService confService;</span><br></pre></td></tr></table></figure>

<h2 id="2-2-model"><a href="#2-2-model" class="headerlink" title="2.2 model"></a>2.2 model</h2><h2 id="2-3-service"><a href="#2-3-service" class="headerlink" title="2.3 service"></a>2.3 service</h2><p>ConfServiceImpl调用cfg-dao-service里的IGdssCfgTeConfigService:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> IGdssCfgTeConfigService iGdssCfgTeConfigService;</span><br></pre></td></tr></table></figure>





<h1 id="3-Spring-boot注解-amp-配置"><a href="#3-Spring-boot注解-amp-配置" class="headerlink" title="3. Spring boot注解&amp;配置"></a>3. Spring boot注解&amp;配置</h1><h2 id="3-1-常用注解"><a href="#3-1-常用注解" class="headerlink" title="3.1 常用注解"></a>3.1 常用注解</h2><h3 id="3-1-1-Configuration"><a href="#3-1-1-Configuration" class="headerlink" title="3.1.1 @Configuration"></a>3.1.1 @Configuration</h3><p>用来标记类可以当做一个bean的定义，被Spring IOC容器使用。</p>
<h3 id="3-1-2-Bean"><a href="#3-1-2-Bean" class="headerlink" title="3.1.2 @Bean"></a>3.1.2 @Bean</h3><p>表示此方法将要返回一个对象，作为一个bean注册进Spring应用上下文。</p>
<h3 id="3-1-3-Component"><a href="#3-1-3-Component" class="headerlink" title="3.1.3 @Component"></a>3.1.3 @Component</h3><p>将 java 类标记为 bean。它是任何 Spring 管理组件的通用构造型。spring 的组件扫描机制现在可以将其拾取并将其拉入应用程序环境中。</p>
<h3 id="3-1-4-Controller"><a href="#3-1-4-Controller" class="headerlink" title="3.1.4 @Controller"></a>3.1.4 @Controller</h3><p>将一个类标记为 Spring Web MVC 控制器。标有它的 Bean 会自动导入到 IoC 容器中。</p>
<h3 id="3-1-5-Service"><a href="#3-1-5-Service" class="headerlink" title="3.1.5 @Service"></a>3.1.5 @Service</h3><p>此注解是组件注解的特化。它不会对 @Component 注解提供任何其他行为。您可以在服务层类中使用 @Service 而不是 @Component，因为它以更好的方式指定了意图。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span>  <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveUser</span><span class="params">()</span> &#123;</span><br><span class="line">    </span><br><span class="line">        System.out.println(<span class="string">&quot;执行service中的保存逻辑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>();</span><br><span class="line">    context.register(SpringConfig.class);</span><br><span class="line">    context.refresh();</span><br><span class="line">    <span class="comment">//获取接口实例</span></span><br><span class="line">    <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">    <span class="comment">//创建实例的代理</span></span><br><span class="line">    <span class="type">UserServiceProxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceProxy</span>(service);</span><br><span class="line">    <span class="comment">//执行方法</span></span><br><span class="line">    proxy.saveUser();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>context.getBean(Interface.class) 自动装配</li>
</ol>
<h3 id="3-1-6-Repository"><a href="#3-1-6-Repository" class="headerlink" title="3.1.6 @Repository"></a>3.1.6 @Repository</h3><p>表示使用注解实例化此类，并交给 Spring 的容器管理。</p>
<p>这个注解是具有类似用途和功能的 @Component 注解的特化。它为 DAO 提供了额外的好处。它将 DAO 导入 IoC 容器，并使未经检查的异常有资格转换为 Spring DataAccessException。</p>
<h3 id="3-1-7-Required"><a href="#3-1-7-Required" class="headerlink" title="3.1.7 @Required"></a>3.1.7 @Required</h3><p>这个注解表明bean的属性必须在配置的时候设置，通过一个bean定义的显式的属性值或通过自动装配，若@Required注解的bean属性未被设置，容器将抛出BeanInitializationException。</p>
<h3 id="3-1-8-Autowired和-Resource"><a href="#3-1-8-Autowired和-Resource" class="headerlink" title="3.1.8 @Autowired和@Resource"></a>3.1.8 @Autowired和@Resource</h3><p>@Autowired默认是按照类型装配注入的，默认情况下它要求依赖对象必须存在（可以设置它required属性为false）。@Autowired 注解提供了更细粒度的控制，包括在何处以及如何完成自动装配。它的用法和@Required一样，修饰 setter方法、构造器、属性或者具有任意名称和&#x2F;或多个参数的PN方法。</p>
<p>注意：</p>
<ol>
<li>@Autowired可用于：构造函数、成员变量、Setter方法</li>
<li>@Autowired和@Resource之间的区别</li>
<li>@Autowired默认是按照类型装配注入的，默认情况下它要求依赖对象必须存在（可以设置它required<br>属性为false）。</li>
<li>@Resource默认是按照名称来装配注入的，只有当找不到与名称匹配的bean才会按照类型来装配注入。</li>
</ol>
<h3 id="3-1-9-Qualifier"><a href="#3-1-9-Qualifier" class="headerlink" title="3.1.9 @Qualifier"></a>3.1.9 @Qualifier</h3><p>当您创建多个相同类型的 bean 并希望仅使用属性装配其中一个 bean 时，您可以使用@Qualifier 注解和 @Autowired 通过指定应该装配哪个确切的 bean 来消除歧义。</p>
<h3 id="3-1-10-RequestMapping"><a href="#3-1-10-RequestMapping" class="headerlink" title="3.1.10 @RequestMapping"></a>3.1.10 @RequestMapping</h3><p>@RequestMapping 注解用于将特定 HTTP 请求方法映射到将处理相应请求的控制器中的特定类&#x2F;方法。<br>此注释可应用于两个级别：</p>
<ol>
<li>类级别：映射请求的 URL</li>
<li>方法级别：映射 URL 以及 HTTP 请求方法</li>
</ol>
<h3 id="3-1-11-RestController"><a href="#3-1-11-RestController" class="headerlink" title="3.1.11 @RestController"></a>3.1.11 @RestController</h3><p>RestController用于传json数据</p>
<p>@RequestParam(value &#x3D; “file”) 指定拿前端的file属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.file.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.common.ListPageVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.file.model.AdminFileVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.login.model.SysUser;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lll.framework.controller.JsonResult;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.file.proxy.modle.LllFileV2;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.file.proxy.modle.ULFileInfoVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.common.MgrBaseController;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.file.service.IAdminFileService;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>:2020/6/5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@function</span>:文件控制器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(path = &quot;/mgrapi/admin/file&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminFileController</span> <span class="keyword">extends</span> <span class="title class_">MgrBaseController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(AdminFileController.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IAdminFileService iAdminFileService;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;上传文件&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">   <span class="meta">@RequestMapping(path = &quot;/upload&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">uploadFile</span><span class="params">(<span class="meta">@RequestParam(value = &quot;file&quot;)</span> MultipartFile file, ULFileInfoVo fileInfo)</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">LllFileV2</span> <span class="variable">fileinfo</span> <span class="operator">=</span> iAdminFileService.uploadFile(file,fileInfo);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createSuccess(fileinfo, <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception ex)&#123;</span><br><span class="line">          log.error(<span class="string">&quot;&quot;</span>,ex);</span><br><span class="line">          <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* @GetMapping(path = &quot;/token&quot;)</span></span><br><span class="line"><span class="comment">    public JsonResult fetchToken()&#123;</span></span><br><span class="line"><span class="comment">        try&#123;</span></span><br><span class="line"><span class="comment">            String token = iAdminFileService.fetchToken();</span></span><br><span class="line"><span class="comment">            return JsonResult.createSuccess(token, &quot;&quot;);</span></span><br><span class="line"><span class="comment">        &#125;catch (Exception ex)&#123;</span></span><br><span class="line"><span class="comment">            return JsonResult.createFail(ex);</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;查询文件列表&quot;, notes = &quot;查询文件列表&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(path = &quot;/query&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">queryFileList</span><span class="params">(<span class="meta">@RequestParam</span> <span class="type">int</span> pageno, <span class="meta">@RequestParam</span> <span class="type">int</span> pagesize, String id)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SysUser</span> <span class="variable">sysUser</span> <span class="operator">=</span> <span class="built_in">this</span>.getCurrentSysUser();</span><br><span class="line">            ListPageVo&lt;AdminFileVo&gt; list = iAdminFileService.queryFilePage(pageno, pagesize, id, sysUser);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> JsonResult.createSuccess(list, <span class="string">&quot;OK&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception ex) &#123;</span><br><span class="line">            log.error(ex);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;获取文件详情&quot;, httpMethod = &quot;GET&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(path = &quot;/query/detail&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">queryFileDetailById</span><span class="params">(<span class="meta">@RequestParam</span> String id)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">AdminFileVo</span> <span class="variable">vo</span> <span class="operator">=</span> iAdminFileService.queryFileDetail(id);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> JsonResult.createSuccess(vo, <span class="string">&quot;获取成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;get file detail msg error&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createFail(<span class="string">&quot;公共服务平台未知异常&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiOperation(value = &quot;通过文件id删除文件&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@PostMapping(path = &quot;/delete&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">deleteFileById</span><span class="params">(<span class="meta">@RequestParam</span> String ids)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            iAdminFileService.deleteFileByFileId(ids);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>, <span class="string">&quot;删除成功&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;delete file error&quot;</span>, e);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createFail(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-2-启动类注解-SpringBootApplication"><a href="#3-2-启动类注解-SpringBootApplication" class="headerlink" title="3.2 启动类注解@SpringBootApplication"></a>3.2 启动类注解@SpringBootApplication</h2><h3 id="3-2-1-SpringBootConfiguration"><a href="#3-2-1-SpringBootConfiguration" class="headerlink" title="3.2.1 @SpringBootConfiguration"></a>3.2.1 @SpringBootConfiguration</h3><p>组合了 @Configuration 注解，实现配置文件的功能。</p>
<h3 id="3-2-2-EnableAutoConfiguration"><a href="#3-2-2-EnableAutoConfiguration" class="headerlink" title="3.2.2 @EnableAutoConfiguration"></a>3.2.2 @EnableAutoConfiguration</h3><p>打开自动配置的功能，也可以关闭某个自动配置的选项，如关闭数据源自动配置功能： </p>
<p>@SpringBootApplication(exclude&#x3D; { DataSourceAutoConfiguration.class })</p>
<h3 id="3-2-3-EnableTransactionManagement"><a href="#3-2-3-EnableTransactionManagement" class="headerlink" title="3.2.3 @EnableTransactionManagement"></a>3.2.3 @EnableTransactionManagement</h3><p>事务处理</p>
<p>proxyTargetClass设置为true表示使用基于子类实现的代理(<code>CGLIB</code>)</p>
<h3 id="3-2-4-ComponentScan"><a href="#3-2-4-ComponentScan" class="headerlink" title="3.2.4 @ComponentScan*"></a>3.2.4 @ComponentScan*</h3><p>Spring组件扫描。</p>
<p>例如：</p>
<ol>
<li>@MapperScan(“cn.lll.**.mapper”)</li>
<li>@ServletComponentScan(value &#x3D; {“cn.lll.iic”})</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lll.framework.util.SpringUtil;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.compile.handler.HandlerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationArguments;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.ApplicationRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.ApplicationListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.event.ApplicationContextEvent;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;cn.lll.**.mapper&quot;)</span></span><br><span class="line"><span class="meta">@ServletComponentScan(value = &#123;&quot;cn.lll.iic&quot;&#125;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement(proxyTargetClass = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IICAppSspApp</span> <span class="keyword">implements</span> <span class="title class_">ApplicationRunner</span>, ApplicationListener&lt;ApplicationContextEvent&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(IICAppSspApp.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//修复logback bug</span></span><br><span class="line">        HandlerFactory.getLogbackHandler().execute( IICAppSspApp.class.getClassLoader() );</span><br><span class="line"></span><br><span class="line">        SpringApplication.run(IICAppSspApp.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;************************************************************* IICAppSspApp 启动完成!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onApplicationEvent</span><span class="params">(ApplicationContextEvent event)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> event.getApplicationContext();</span><br><span class="line">        SpringUtil.setApplicationContext(context);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-3-yml配置"><a href="#3-3-yml配置" class="headerlink" title="3.3 yml配置"></a>3.3 yml配置</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8095</span></span><br><span class="line">    <span class="attr">compression:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">mime-types:</span> <span class="string">text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json,application/xml</span></span><br><span class="line">    <span class="attr">session:</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="number">1800</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">    <span class="attr">multipart:</span></span><br><span class="line">      <span class="attr">maxFileSize:</span> <span class="string">20MB</span></span><br><span class="line">      <span class="attr">maxRequestSize:</span> <span class="string">20MB</span></span><br><span class="line">  <span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">date-format:</span> <span class="string">yyyy-MM-dd</span> <span class="string">HH:mm:ss</span></span><br><span class="line">    <span class="attr">time-zone:</span> <span class="string">GMT+8</span></span><br><span class="line">  <span class="attr">thymeleaf:</span></span><br><span class="line">    <span class="attr">prefix:</span> <span class="string">classpath:/templates/</span></span><br><span class="line">    <span class="attr">suffix:</span> <span class="string">.html</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">    <span class="comment"># config-location: classpath:mybatis-config.xml</span></span><br><span class="line">    <span class="attr">mapper-locations:</span> <span class="string">classpath*:**/mybatis-*.xml</span></span><br><span class="line">  <span class="comment">#type-aliases-package: cn.lll.tsp.model</span></span><br><span class="line">    <span class="attr">configuration:</span></span><br><span class="line">      <span class="attr">cache-enabled:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">use-actual-param-name:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#标识业务统计</span></span><br><span class="line"><span class="attr">stat:</span></span><br><span class="line">  <span class="attr">redis-ip:</span> <span class="number">114.67</span><span class="number">.117</span><span class="number">.77</span></span><br><span class="line">  <span class="attr">redis-pwd:</span> <span class="string">y0aoQ67K62pHrPjp</span></span><br><span class="line">  <span class="attr">redis-key:</span> <span class="string">IIC_STAT_SSP</span></span><br></pre></td></tr></table></figure>





<h1 id="4-AOP"><a href="#4-AOP" class="headerlink" title="4. AOP"></a>4. AOP</h1><p>动态代理实现：相比静态代理，同样需要target类实现接口，但无需手动定义proxy类实现同样的接口，而是定义动态代理器implements InvocationHandler</p>
<ol>
<li>动态处理器</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Object object;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">DynamicProxy</span><span class="params">(<span class="keyword">final</span> Object object)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.object = object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                  System.out.println(<span class="string">&quot;执行前逻辑&quot;</span>);</span><br><span class="line">                    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(object, args);</span><br><span class="line">                  System.out.println(<span class="string">&quot;执行后逻辑&quot;</span>);</span><br><span class="line">                   <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>测试类代码</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>();</span><br><span class="line">        context.register(SpringConfig.class);</span><br><span class="line">        context.refresh();</span><br><span class="line">        <span class="comment">//获取接口实例</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        <span class="comment">//动态创建实例的代理</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">proxy</span> <span class="operator">=</span> (UserService)Proxy.newProxyInstance(UserService.class.getClassLoader(),</span><br><span class="line">                            <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;UserService.class&#125;, <span class="keyword">new</span> <span class="title class_">DynamicProxy</span>(service));</span><br><span class="line">        <span class="comment">//proxy执行方法</span></span><br><span class="line">        proxy.saveUser();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Proxy.newProxyInstance()的参数：</p>
<ul>
<li><strong>ClassLoader loader</strong>: 指定当前目标对象使用的类加载器，获取加载器的方法是固定的</li>
<li><strong>Class&lt;?&gt;[] interfaces</strong>: 指定目标对象实现的接口的类型，使用泛型方式确认类型</li>
<li><strong>InvocationHandler</strong>: 指定动态处理器，执行目标对象的方法时，会触发事件处理器的方法</li>
</ul>
<h1 id="5-IOC"><a href="#5-IOC" class="headerlink" title="5. IOC"></a>5. IOC</h1><h1 id="6-user-list-从html到mysql"><a href="#6-user-list-从html到mysql" class="headerlink" title="6. user-list 从html到mysql"></a>6. user-list 从html到mysql</h1><h2 id="6-1-router-cfg-js"><a href="#6-1-router-cfg-js" class="headerlink" title="6.1 router-cfg.js"></a>6.1 router-cfg.js</h2><p>vue.js 配置文件</p>
<p>第一部分：path与jsFile对应，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-list.js&quot;</span>&#125;,</span><br></pre></td></tr></table></figure>

<p>第二部分：组件的alias与component中的js对应，如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;iic-table&quot;</span>: <span class="string">&quot;/components/iic-table/iic-table.js&quot;</span>,</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">RouterCfg</span> = [</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/home/home.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/home&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/home/home.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/update-pwd&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/home/update-pwd.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/account&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/home/account.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/account/manage-company-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/home/manage-company-list.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/type/usermod-type-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/type/usermod-type-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/type/usermod-type-add/:parentId&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/type/usermod-type-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/type/usermod-type-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/type/usermod-type-edit.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/datamod/usermod-datamod-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/datamod/usermod-datamod-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/datamod/usermod-datamod-add&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/datamod/usermod-datamod-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/datamod/usermod-datamod-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/datamod/usermod-datamod-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/datamod/usermod-datamod-info/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/datamod/usermod-datamod-info.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/detail&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/handle-detail/han-handle-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/encrypt/detail&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/encrypt-handle/encrypt-handle-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/middleware/detail&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/middleware-handle/middleware-handle-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/user-handle&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/user-handle/han-user-handle.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/admin/user-handle/:account&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/user-handle/han-user-handle-admin.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/edit&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/handle-edit/handle-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/create&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/handle-create/handle-create.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/admin/create/:prefix&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/handle-create/handle-create-admin.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/admin/create&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/han/handle-create/handle-create-admin.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-create-bus&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-create-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-delete-bus&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-delete-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-edit-bus&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-edit-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-detail-bus/:hanId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-detail-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-batch-create-process&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/admin-batch-create-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-batch-create/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-create-batch-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-batch-create/detail/:busId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-create-batch-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-bus.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/bus/han-error-bus&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/bus/han-error-bus.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/middleware/middleware-add&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/middleware/middleware-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/middleware/middleware-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/middleware/middleware-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/middleware/middleware-detail/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/middleware/middleware-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/middleware/bus-type-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/middleware/handle-bus-type-list.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/usystem/usystem-add&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/usystem/usystem-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/usystem/usystem-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/usystem/usystem-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/usystem/usystem-info/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/usystem/usystem-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/usystem/usystem-edit/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/usystem/usystem-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/system-api-add&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/system-api/system-api-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/system-api-edit/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/system-api/system-api-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/system-api-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/system-api/system-api-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/system-api-info/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/system-api/system-api-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/:apiId/api-method-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/api-method/api-method-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/:apiId/api-method-add&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/api-method/api-method-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/:apiId/api-method-edit/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/api-method/api-method-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/api/system-api/:apiId/api-method-info/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/api/api-method/api-method-info.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/file/upload&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/file/file-upload.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/file/mine&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/file/file-mine.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/file/detail/:fileId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/file/file-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/conf/manage&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/conf/conf-manage.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/conf/record&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/conf/conf-record.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/conf/record/detail/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/conf/conf-record-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/conf/add&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/conf/conf-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/conf/edit/:confId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/conf/conf-edit.js&quot;</span>&#125;,</span><br><span class="line">    <span class="comment">//废弃开始 2021.3.31</span></span><br><span class="line">    <span class="comment">// &#123;path: &quot;/assit/sdk/home/&quot;, jsFile: &quot;/pages/assist/sdk-home.js&quot;&#125;,</span></span><br><span class="line">    <span class="comment">// &#123;path: &quot;/assit/sdk/download/&quot;, jsFile: &quot;/pages/assist/sdk-download.js&quot;&#125;,</span></span><br><span class="line">    <span class="comment">// &#123;path: &quot;/assit/demo/download/&quot;, jsFile: &quot;/pages/assist/demo-download.js&quot;&#125;,</span></span><br><span class="line">    <span class="comment">//废弃结束</span></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/user/sdk-config/record&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/sdk/sdk-user-config.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/user/sdk-config/detail/:recordId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/sdk/sdk-user-config-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/user/sdk/renew-record&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/sdk/sdk-renew-record.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/sdk/edit/:sdkId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/sdk/sdk-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/sdk/detail/:sdkId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/sdk/sdk-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/sdk/manage&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/sdk/sdk-manage.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// &#123;path: &quot;/assit/sdk-demo/download/&quot;, jsFile: &quot;/pages/assist/sdk-download.js&quot;&#125;,</span></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/middleware/manage&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/middlewareadmin/middleware-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/middleware/detail&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/middlewareadmin/middleware-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/user-system/manage&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/user-system/usystem-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/user-system/detail/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/user-system/usystem-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/system-api/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/system-api/sapi-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/http-api/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/system-api/hapi-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/system-api/manage&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/system-api/sapi-manage.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/system-api/detail/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/system-api/sapi-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/http-api/detail/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/system-api/hapi-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/api-method/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/api-method/method-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/system-api/:apiId/api-method-info/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/apiadmin/api-method/method-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/log/login-log/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/logcenter/login-log-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/audit/user-action/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/auditcenter/user-action-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/log/login-log/list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/log/login-log-list.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/audit/apply-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/audit/apply-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;/audit/apply-detail/:id&#x27;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/audit/apply-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;/audit/apply-edit/:id&#x27;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/audit/apply-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;/audit/audited-list&#x27;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/audit/audited-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;/audit/audited-record-detail/:id&#x27;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/audit/audited-record-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;/admin/file/mine&#x27;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/filecenter/file-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;/admin/file/upload&#x27;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/filecenter/file-upload.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/file/detail/:fileId&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/filecenter/file-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/admin/auth/menu/menu-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/auth/menu/menu-list.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/handle-data-type/handle-data-type-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/han/handle-data-type/handle-data-type-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/han/handle-extrainfo/handle-extrainfo-edit&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/han/handle-extrainfo/handle-extrainfo-edit.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-add&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-info/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-role/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-role.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/bind-company/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/user/user-bind-company.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/user/user-prefix&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/user/user/user-prefix.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/company/company-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/company/company-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/company/company-add&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/company/company-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/company/company-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/company/company-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/company/company-info/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/company/company-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/user/company/bind-user/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/user/company/company-bind-user.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/goods/goods-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/goods/goods-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/goods/goods/goods-detail/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/goods/goods/goods-detail.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/singlegoods/singlegoods-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/singlegoods/singlegoods-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/singlegoods/singlegoods-add&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/singlegoods/singlegoods-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/singlegoods/singlegoods-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/singlegoods/singlegoods-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/singlegoods/singlegoods-detail/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/singlegoods/singlegoods-detail.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/saleorder/saleorder-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/saleorder/saleorder-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/pay/pay-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/pay/pay-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&quot;/goods/pay/pay-saleorder/:id&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/goods/pay/pay-saleorder.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/goods/recharge/recharge-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/goods/recharge/recharge-list.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/system-viewmode-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/system-viewmode-list.js&quot;</span>&#125;,</span><br><span class="line">    <span class="comment">// &#123;path:&quot;/usermod/viewmod/viewmode-create&quot;, jsFile:&quot;/pages/usermod/viewmod/viewmode-create.js&quot;&#125;,</span></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/viewmode-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/viewmode-info/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-datacfg-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-datacfg-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-datacfg-create&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-datacfg-create.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-datacfg-info/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-datacfg-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-datacfg-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-datacfg-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-pageinfo-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-pageinfo-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-pageinfo-add&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-pageinfo-add.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/:vmId/viewmode-pageinfo-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/viewmod/viewmode-pageinfo-edit.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/system-staticfile-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/staticfile/system-staticfile-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/staticfile/staticfile-create&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/staticfile/staticfile-create.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/staticfile/staticfile-info/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/staticfile/staticfile-info.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/staticfile/staticfile-edit/:id&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/usermod/staticfile/staticfile-edit.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/usermod/viewmod/user/viewmod-market&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/usermod/viewmod-user/viewmod-market.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/admin/auth/menu/menu-list&quot;</span>, <span class="attr">jsFile</span>:<span class="string">&quot;/pages/auth/menu/menu-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/admin/auth/role/role-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/auth/role/role-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/admin/auth/url/url-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/auth/url/url-list.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/admin/auth/api/api-list&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/auth/api/api-list.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/home/admin-home&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/home/admin-home.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/home/user-home&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/home/user-home.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/admin/user-statis&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/admin/user-statis.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/user/order-statis&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/user/order-statis.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/user/body-statis&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/user/body-statis.js&quot;</span>&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/user/msg-statis&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/user/msg-statis.js&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/statis/user/other-statis&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/statis/user/other-statis.js&quot;</span>&#125;,</span><br><span class="line">    </span><br><span class="line">    &#123;<span class="attr">path</span>:<span class="string">&quot;/error/403&quot;</span>, <span class="attr">jsFile</span>: <span class="string">&quot;/pages/error/403.js&quot;</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">//组件cfg</span></span><br><span class="line">seajs.<span class="title function_">config</span>(&#123;</span><br><span class="line">    <span class="attr">alias</span>:&#123;</span><br><span class="line">        <span class="string">&quot;iic-checkbox&quot;</span>: <span class="string">&quot;/components/iic-checkbox/iic-checkbox.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-radio&quot;</span>: <span class="string">&quot;/components/iic-radio/iic-radio.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-html&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-html.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-image&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-image.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-imagebig&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-imagebig.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-text&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-text.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-url&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-url.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-video&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-video.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamod-mgr&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-datamod-mgr.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-relateinfo-edit&quot;</span>: <span class="string">&quot;/components/iic-relateinfo-edit/iic-relateinfo-edit.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ri-index-select&quot;</span>: <span class="string">&quot;/components/iic-relateinfo-edit/el/ri-index-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ri-type-select&quot;</span>: <span class="string">&quot;/components/iic-relateinfo-edit/el/ri-type-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ri-row-btn&quot;</span>: <span class="string">&quot;/components/iic-relateinfo-edit/el/ri-row-btn.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ri-dm-win&quot;</span>: <span class="string">&quot;/components/iic-relateinfo-edit/el/ri-dm-win.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;dmr-index&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/dmr-index/dmr-index.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-dm-detail-win&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-dm-detail-win.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-relateinfo-type&quot;</span>: <span class="string">&quot;/components/iic-datamod-mgr/type/iic-relateinfo-type.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-file-upload&quot;</span>: <span class="string">&quot;/components/iic-file-upload/iic-file-upload.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-img-upload&quot;</span>: <span class="string">&quot;/components/iic-img-upload/iic-img-upload.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-date&quot;</span>: <span class="string">&quot;/components/iic-input-date/iic-input-date.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-datetime&quot;</span>: <span class="string">&quot;/components/iic-input-datetime/iic-input-datetime.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-email&quot;</span>: <span class="string">&quot;/components/iic-input-email/iic-input-email.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-int&quot;</span>: <span class="string">&quot;/components/iic-input-int/iic-input-int.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-number&quot;</span>: <span class="string">&quot;/components/iic-input-number/iic-input-number.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-mobile&quot;</span>: <span class="string">&quot;/components/iic-input-mobile/iic-input-mobile.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-text&quot;</span>: <span class="string">&quot;/components/iic-input-text/iic-input-text.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-code&quot;</span>: <span class="string">&quot;/components/iic-input-code/iic-input-code.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-search&quot;</span>: <span class="string">&quot;/components/iic-input-search/iic-input-search.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-page-split&quot;</span>: <span class="string">&quot;/components/iic-page-split/iic-page-split.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-select&quot;</span>: <span class="string">&quot;/components/iic-select/iic-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-select-input&quot;</span>: <span class="string">&quot;/components/iic-select-input/iic-select-input.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-select-tree&quot;</span>: <span class="string">&quot;/components/iic-select-tree/iic-select-tree.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-select-area&quot;</span>: <span class="string">&quot;/components/iic-select-area/iic-select-area.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-user-dmtype-tree&quot;</span>: <span class="string">&quot;/components/iic-user-dmtype-tree/iic-user-dmtype-tree.js&quot;</span>,</span><br><span class="line">        <span class="comment">//使用此组件需要引入 iic-vmod-list</span></span><br><span class="line">        <span class="string">&quot;iic-vmod-select&quot;</span>: <span class="string">&quot;/components/iic-vmod-select/iic-vmod-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-panel-top&quot;</span>: <span class="string">&quot;/components/iic-panel-top/iic-panel-top.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-table&quot;</span>: <span class="string">&quot;/components/iic-table/iic-table.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-tabs&quot;</span>: <span class="string">&quot;/components/iic-tabs/iic-tabs.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-tool-bars&quot;</span>: <span class="string">&quot;/components/iic-tool-bars/iic-tool-bars.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-form&quot;</span>: <span class="string">&quot;/components/iic-form/iic-form.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-select&quot;</span>: <span class="string">&quot;/components/iic-select/iic-input-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-html&quot;</span>: <span class="string">&quot;/components/iic-input-html/iic-input-html.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-textarea&quot;</span>: <span class="string">&quot;/components/iic-textarea/iic-input-textarea.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-readonly&quot;</span>: <span class="string">&quot;/components/iic-readonly/iic-readonly.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-file&quot;</span>: <span class="string">&quot;/components/iic-input-file/iic-input-file.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-apimethod-tree&quot;</span>: <span class="string">&quot;/components/iic-apimethod-tree/iic-apimethod-tree.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-apimethod-header&quot;</span>: <span class="string">&quot;/components/iic-apimethod-header/iic-apimethod-header.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-page-menu&quot;</span>: <span class="string">&quot;/components/iic-page-menu/iic-page-menu.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-other&quot;</span>: <span class="string">&quot;/components/iic-other/iic-other.js&quot;</span>,<span class="comment">//无法归类的杂组件</span></span><br><span class="line">        <span class="string">&quot;iic-file&quot;</span>: <span class="string">&quot;/components/iic-file/iic-file.js&quot;</span>,<span class="comment">//文件相关的杂组件</span></span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;iic-handle-detail-item&quot;</span>: <span class="string">&quot;/components/iic-handle-detail-item/iic-handle-detail-item.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-datamodel-select&quot;</span>: <span class="string">&quot;/components/iic-datamodel-select/iic-datamodel-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-viewmodel-select&quot;</span>: <span class="string">&quot;/components/iic-viewmodel-select/iic-viewmodel-select.js&quot;</span>,</span><br><span class="line">        <span class="comment">//此组件需要require(&#x27;iic-select-tree&#x27;); require(&#x27;iic-vmod-type-select&#x27;); require(&#x27;iic-table&#x27;);</span></span><br><span class="line">        <span class="string">&quot;iic-vmod-list&quot;</span>: <span class="string">&quot;/components/iic-vmod-list/iic-vmod-list.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-vmod-type-select&quot;</span>: <span class="string">&quot;/components/iic-vmod-type-select/iic-vmod-type-select.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-input-handle&quot;</span>: <span class="string">&quot;/components/iic-input-handle/iic-input-handle.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-admin-input-handle&quot;</span>: <span class="string">&quot;/components/iic-input-handle/iic-admin-input-handle.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;iic-select-checktree&quot;</span>: <span class="string">&quot;/components/iic-select-checktree/iic-select-checktree.js&quot;</span>,</span><br><span class="line"></span><br><span class="line">        <span class="string">&quot;statis-base&quot;</span>: <span class="string">&quot;/pages/statis/statis-base.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;sha256&quot;</span>: <span class="string">&quot;/assets/js/common/sha256.js&quot;</span>,</span><br><span class="line">        <span class="string">&quot;math&quot;</span>: <span class="string">&quot;/assets/libs/math/math.min.js&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>





<h2 id="6-2-user-list-html"><a href="#6-2-user-list-html" class="headerlink" title="6.2 user-list.html"></a>6.2 user-list.html</h2><p>只展示</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- start page title --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-title-box d-flex align-items-center justify-content-between&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">&quot;mb-0 font-size-18&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-title-right&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">&quot;breadcrumb m-0&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;breadcrumb-item&quot;</span>&gt;</span>用户中心<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;breadcrumb-item active&quot;</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- end page title --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-lg-12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">&lt;!-- 工具栏 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-6&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-toolbar&quot;</span> <span class="attr">role</span>=<span class="string">&quot;toolbar&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-group&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;go(&#x27;/user/user/user-add&#x27;)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-plus&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        新增</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;edit(&#x27;/user/user/user-edit/&#123;id&#125;&#x27;)&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-edit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        编辑</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;del()&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-trash-alt&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        删除</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;refresh()&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-recycle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                        刷新</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onClickCacheAllBus&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-recycle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>刷新所有业务</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;cacheAdmBus&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-recycle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>刷新admin业务</span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-6&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn-group&quot;</span> <span class="attr">style</span>=<span class="string">&quot;float: right;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-sm&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;keyword&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入用户账户&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;queryByAcct()&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary waves-effect waves-light btn-sm&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 40px;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fas fa-search&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">                                &lt;a href=&quot;javascript:void(0)&quot; class=&quot;btn btn-primary waves-effect waves-light btn-sm&quot; style=&quot;width: 100px; border-left-color:#ced4da;&quot;&gt;</span></span><br><span class="line"><span class="comment">                                    高级查询</span></span><br><span class="line"><span class="comment">                                &lt;/a&gt;</span></span><br><span class="line"><span class="comment">                                --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;table-responsive mt-3&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table mb-0 table-striped&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span> <span class="attr">scope</span>=<span class="string">&quot;col&quot;</span>  <span class="attr">style</span>=<span class="string">&quot;width: 50px;&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;custom-control custom-checkbox&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-input&quot;</span> <span class="attr">:checked</span>=<span class="string">&quot;selectAll&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-label&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onSelectAll()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>账号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>昵称<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>账号状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>接入状态<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>接入语言<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>角色权限<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span>&gt;</span>注册时间<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">th</span> <span class="attr">width</span>=<span class="string">&quot;240&quot;</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                               <span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;obj in datas&quot;</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                       <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;custom-control custom-checkbox&quot;</span>&gt;</span></span><br><span class="line">                                           <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-input&quot;</span> <span class="attr">:checked</span>=<span class="string">&quot;obj.selected&quot;</span> &gt;</span></span><br><span class="line">                                           <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;custom-control-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;customCheck1&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onSelectOne(obj)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                                       <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;obj.userName&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;obj.nickname&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;obj.status==1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;mdi mdi-checkbox-blank-circle text-success mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 有效<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                                      <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;obj.status==-1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;mdi mdi-checkbox-blank-circle text-danger mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 无效<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;obj.accessStatus==1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;mdi mdi-checkbox-blank-circle text-success mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>已接入<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;mdi mdi-checkbox-blank-circle text-danger mr-1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>未接入<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;obj.language&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;obj.roleNames | ls-string&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                                   <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;obj.createTime&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                   &lt;td&gt;--&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">iic-table-buttons</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">iic-table-button</span> <span class="attr">label</span>=<span class="string">&quot;查看&quot;</span> <span class="attr">cls</span>=<span class="string">&quot;btn btn-outline-info btn-sm&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;onClickView(obj,&#x27;/user/user/user-info/&#x27;+obj.id)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-button</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">iic-table-button</span> <span class="attr">label</span>=<span class="string">&quot;编辑&quot;</span> <span class="attr">cls</span>=<span class="string">&quot;btn btn-outline-success btn-sm&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;onClickEdit(obj,&#x27;/user/user/user-edit/&#x27;+obj.id)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-button</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;<span class="name">iic-table-button-more</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">iic-table-button-more-item</span> <span class="attr">label</span>=<span class="string">&quot;分配权限&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;onClickView(obj,&#x27;/user/user/user-role/&#x27;+obj.id)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-button-more-item</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">iic-table-button-more-item</span> <span class="attr">label</span>=<span class="string">&quot;关联企业&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;onClickView(obj,&#x27;/user/user/bind-company/&#x27;+obj.id)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-button-more-item</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">iic-table-button-more-item</span> <span class="attr">label</span>=<span class="string">&quot;删除&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;onClickDel(obj,&#x27;/mgrapi/user/del&#x27;)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-button-more-item</span>&gt;</span></span><br><span class="line">                                                <span class="tag">&lt;<span class="name">iic-table-button-more-item</span> <span class="attr">label</span>=<span class="string">&quot;刷新业务缓存&quot;</span> @<span class="attr">click.native</span>=<span class="string">&quot;onClickCacheBus(obj)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-button-more-item</span>&gt;</span></span><br><span class="line">                                            <span class="tag">&lt;/<span class="name">iic-table-button-more</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;/<span class="name">iic-table-buttons</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                      &lt;button type=&quot;button&quot; @click=&quot;go(&#x27;/user/user/user-info/&#123;id&#125;&#x27;,obj.id)&quot; class=&quot;btn btn-outline-info btn-sm&quot;&gt;查看&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                      &lt;button type=&quot;button&quot; @click=&quot;go(&#x27;/user/user/user-edit/&#123;id&#125;&#x27;,obj.id)&quot; class=&quot;btn btn-outline-success btn-sm&quot;&gt;编辑&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                      &lt;button type=&quot;button&quot; @click=&quot;go(&#x27;/user/user/user-role/&#123;id&#125;&#x27;,obj.id)&quot; class=&quot;btn btn-outline-info btn-sm&quot;&gt;分配权限&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                        &lt;button type=&quot;button&quot; @click=&quot;go(&#x27;/user/user/bind-company/&#123;id&#125;&#x27;,obj.id)&quot; class=&quot;btn btn-outline-success btn-sm&quot;&gt;关联企业&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                        &lt;button type=&quot;button&quot; @click=&quot;del(obj.id)&quot; class=&quot;btn btn-outline-danger btn-sm&quot;&gt;删除&lt;/button&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--                                   &lt;/td&gt;--&gt;</span></span><br><span class="line">                               <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--分页--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">iic-table-page-split</span> <span class="attr">:totalRows</span>=<span class="string">&quot;pageInfo.recordTotal&quot;</span> <span class="attr">:pageSize</span>=<span class="string">&quot;pageInfo.pagesize&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;pageInfo.pageno&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;changePage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iic-table-page-split</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- end row --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-3-user-list-js"><a href="#6-3-user-list-js" class="headerlink" title="6.3 user-list.js"></a>6.3 user-list.js</h2><p>通过template将js传入html</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> tpl = <span class="built_in">require</span>(<span class="string">&#x27;./user-list.html&#x27;</span>); <span class="attr">template</span>: tpl</span><br></pre></td></tr></table></figure>



<p>SeaJs: CMD模块化</p>
<ol>
<li><p>通过require引入依赖，调用其他js模块(接口)</p>
</li>
<li><p>通过module.exports提供接口</p>
</li>
<li><p>Vue.extend创建Vue, 有参数: extends, props, data(function), watch, methods, template</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">define</span>(<span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>,<span class="built_in">exports</span>,<span class="variable language_">module</span></span>)&#123;</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&quot;iic-panel-top&quot;</span>);</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&quot;iic-tool-bars&quot;</span>);</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&quot;iic-table&quot;</span>);</span><br><span class="line">   <span class="keyword">var</span> tpl = <span class="built_in">require</span>(<span class="string">&#x27;./user-list.html&#x27;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">      <span class="attr">extends</span>: <span class="title class_">IICBaseTable</span>,</span><br><span class="line">      <span class="attr">props</span>: [],</span><br><span class="line">        <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">datas</span>: [],</span><br><span class="line">            <span class="attr">pageInfo</span>: &#123;</span><br><span class="line">               <span class="attr">pagesize</span>: <span class="number">10</span>,</span><br><span class="line">               <span class="attr">pageno</span>: <span class="number">1</span>,</span><br><span class="line">               <span class="attr">recordTotal</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">params</span>: &#123;</span><br><span class="line">               <span class="attr">typeId</span>: <span class="string">&#x27;0&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">selectAll</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">watch</span>: &#123;</span><br><span class="line">         <span class="string">&#x27;$route&#x27;</span>: <span class="string">&#x27;initCom&#x27;</span>,</span><br><span class="line">         <span class="attr">keyword</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">//删除了查找关键字，回到第一页数据</span></span><br><span class="line">            <span class="keyword">if</span> ( !<span class="variable language_">this</span>.<span class="property">keyword</span>.<span class="title function_">trim</span>() ) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">changePage</span>(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">methods</span>: &#123;</span><br><span class="line">           <span class="attr">initCom</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">loadData</span>();</span><br><span class="line">         &#125;,</span><br><span class="line">         <span class="title function_">queryByAcct</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">keyword</span>.<span class="title function_">trim</span>()) &#123;</span><br><span class="line">               <span class="title class_">Iic</span>.<span class="title function_">showMessage</span>(<span class="string">&quot;请输入用户账号&quot;</span>);</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">pageno</span> = <span class="number">1</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">loadData</span>(<span class="literal">true</span>);</span><br><span class="line">         &#125;,</span><br><span class="line">           <span class="attr">loadData</span>: <span class="keyword">function</span>(<span class="params">searchByAcct</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">            <span class="keyword">var</span> url = <span class="string">&#x27;./mgrapi/user/user-list&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (searchByAcct) &#123;</span><br><span class="line">               url += <span class="string">&quot;?usrAcct=&quot;</span> + <span class="title function_">encodeUrl</span>(<span class="variable language_">this</span>.<span class="property">keyword</span>);</span><br><span class="line">            &#125;</span><br><span class="line">              <span class="keyword">var</span> params = &#123;</span><br><span class="line">                 <span class="attr">pagesize</span>: _this.<span class="property">pageInfo</span>.<span class="property">pagesize</span>,</span><br><span class="line">                 <span class="attr">pageno</span>: _this.<span class="property">pageInfo</span>.<span class="property">pageno</span></span><br><span class="line">              &#125;;</span><br><span class="line">              <span class="title function_">ajaxPost</span>(url,params).<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">                 _this.<span class="property">datas</span> = data.<span class="property">datas</span>;</span><br><span class="line">               _this.<span class="property">pageInfo</span>.<span class="property">recordTotal</span> = data.<span class="property">recordTotal</span>;</span><br><span class="line">               _this.<span class="property">selectAll</span> = <span class="literal">false</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">exeDel</span>: <span class="keyword">function</span>(<span class="params">ids</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              <span class="keyword">var</span> url = <span class="string">&#x27;./mgrapi/user/del&#x27;</span>;</span><br><span class="line">              <span class="keyword">var</span> params = &#123;<span class="attr">ids</span>:ids&#125;;</span><br><span class="line">              <span class="title function_">ajaxPost</span>(url,params).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                 _this.<span class="title function_">loadData</span>();</span><br><span class="line">              &#125;);</span><br><span class="line">           &#125;,</span><br><span class="line">           </span><br><span class="line">           <span class="comment">///////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">           <span class="comment">///////////////////////////////////  默认方法  //////////////////////////////////////////</span></span><br><span class="line">           <span class="comment">///////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">           <span class="attr">onSelectAll</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              _this.<span class="property">selectAll</span> = !_this.<span class="property">selectAll</span>;</span><br><span class="line">              _this.<span class="property">datas</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                 obj.<span class="property">selected</span> = _this.<span class="property">selectAll</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              _this.<span class="property">datas</span> = _this.<span class="property">datas</span>.<span class="title function_">concat</span>([]);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">onSelectOne</span>: <span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">              obj.<span class="property">selected</span> = !obj.<span class="property">selected</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">datas</span> = <span class="variable language_">this</span>.<span class="property">datas</span>.<span class="title function_">concat</span>([]);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">isSelected</span>: <span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(obj.<span class="property">selected</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">go</span>: <span class="keyword">function</span>(<span class="params">url,id</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(id)&#123;</span><br><span class="line">                 url = url.<span class="title function_">replace</span>(<span class="string">&#x27;&#123;id&#125;&#x27;</span>,id);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span> = url;</span><br><span class="line">         &#125;,</span><br><span class="line">          <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 跳转到指定页</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; pageNo </span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="attr">changePage</span>: <span class="keyword">function</span>(<span class="params">pageNo</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">pageno</span> = pageNo;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">loadData</span>();</span><br><span class="line">            &#125;,</span><br><span class="line">           <span class="attr">edit</span>: <span class="keyword">function</span>(<span class="params">url,id</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              <span class="keyword">if</span>(!id)&#123;</span><br><span class="line">                 <span class="keyword">var</span> datas = <span class="variable language_">this</span>.<span class="title function_">_getSelectedData</span>();</span><br><span class="line">                 <span class="keyword">if</span>(datas.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                     <span class="title function_">showErrAlert</span>(<span class="string">&#x27;操作错误&#x27;</span>,<span class="string">&#x27;请选择要操作的记录&#x27;</span>);</span><br><span class="line">                       <span class="keyword">return</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                 <span class="keyword">if</span>(datas.<span class="property">length</span>&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="title function_">showErrAlert</span>(<span class="string">&#x27;操作错误&#x27;</span>,<span class="string">&#x27;只能选择一条记录&#x27;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                 &#125;</span><br><span class="line">                 id = datas[<span class="number">0</span>].<span class="property">id</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              url = url.<span class="title function_">replace</span>(<span class="string">&#x27;&#123;id&#125;&#x27;</span>,id);</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span> = url;</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">del</span>: <span class="keyword">function</span>(<span class="params">id</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              <span class="keyword">var</span> ids = [];</span><br><span class="line">              </span><br><span class="line">              <span class="keyword">if</span>(!id)&#123;</span><br><span class="line">                 <span class="keyword">var</span> datas = <span class="variable language_">this</span>.<span class="title function_">_getSelectedData</span>();</span><br><span class="line">                  <span class="keyword">if</span>(datas.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                     <span class="title function_">showErrAlert</span>(<span class="string">&#x27;操作错误&#x27;</span>,<span class="string">&#x27;请选择要删除的记录&#x27;</span>);</span><br><span class="line">                       <span class="keyword">return</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  datas.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                     ids.<span class="title function_">push</span>(obj.<span class="property">id</span>);</span><br><span class="line">                  &#125;);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 ids=[id];</span><br><span class="line">              &#125;</span><br><span class="line">              </span><br><span class="line">              <span class="title function_">showConfrim</span>(<span class="string">&#x27;确定要删除吗?&#x27;</span>).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                  _this.<span class="title function_">exeDel</span>(ids.<span class="title function_">join</span>(<span class="string">&#x27;,&#x27;</span>));</span><br><span class="line">              &#125;);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">_getSelectedData</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> res = [];</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">datas</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                 <span class="keyword">if</span>(obj.<span class="property">selected</span>)&#123;</span><br><span class="line">                    res.<span class="title function_">push</span>(obj);</span><br><span class="line">                 &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">return</span> res;</span><br><span class="line">           &#125;,</span><br><span class="line">            <span class="title function_">onClickCacheAllBus</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="title function_">showConfrim</span>(<span class="string">&#x27;确认刷新所有业务缓存&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">var</span> url = <span class="string">&#x27;/mgrapi/user/bus/cache/all&#x27;</span>;</span><br><span class="line">                    <span class="title function_">ajaxPost</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">showSuccAlert</span>(<span class="string">&quot;任务提交成功&quot;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">onClickCacheBus</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                <span class="title function_">showConfrim</span>(<span class="string">&#x27;确认刷新业务缓存&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> url = <span class="string">&#x27;/mgrapi/user/bus/cache?username=&#x27;</span> + obj.<span class="property">userName</span>;</span><br><span class="line">                    <span class="title function_">ajaxPost</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">showSuccAlert</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">cacheAdmBus</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="title function_">showConfrim</span>(<span class="string">&#x27;确认刷新业务缓存&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> url = <span class="string">&#x27;/mgrapi/user/bus/cache/adm&#x27;</span>;</span><br><span class="line">                    <span class="title function_">ajaxPost</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">showSuccAlert</span>(<span class="string">&#x27;任务提交成功&#x27;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>: tpl</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">define</span>(<span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>,<span class="built_in">exports</span>,<span class="variable language_">module</span></span>)&#123;</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&quot;iic-panel-top&quot;</span>);</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&quot;iic-tool-bars&quot;</span>);</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&quot;iic-table&quot;</span>);</span><br><span class="line">   <span class="keyword">var</span> tpl = <span class="built_in">require</span>(<span class="string">&#x27;./user-list.html&#x27;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">      <span class="attr">extends</span>: <span class="title class_">IICBaseTable</span>,</span><br><span class="line">      <span class="attr">props</span>: [],</span><br><span class="line">        <span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">datas</span>: [],</span><br><span class="line">            <span class="attr">pageInfo</span>: &#123;</span><br><span class="line">               <span class="attr">pagesize</span>: <span class="number">10</span>,</span><br><span class="line">               <span class="attr">pageno</span>: <span class="number">1</span>,</span><br><span class="line">               <span class="attr">recordTotal</span>: <span class="number">0</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">params</span>: &#123;</span><br><span class="line">               <span class="attr">typeId</span>: <span class="string">&#x27;0&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">selectAll</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">keyword</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">watch</span>: &#123;</span><br><span class="line">         <span class="string">&#x27;$route&#x27;</span>: <span class="string">&#x27;initCom&#x27;</span>,</span><br><span class="line">         <span class="attr">keyword</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="comment">//删除了查找关键字，回到第一页数据</span></span><br><span class="line">            <span class="keyword">if</span> ( !<span class="variable language_">this</span>.<span class="property">keyword</span>.<span class="title function_">trim</span>() ) &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">changePage</span>(<span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">         &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">methods</span>: &#123;</span><br><span class="line">           <span class="attr">initCom</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="title function_">loadData</span>();</span><br><span class="line">         &#125;,</span><br><span class="line">         <span class="title function_">queryByAcct</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">keyword</span>.<span class="title function_">trim</span>()) &#123;</span><br><span class="line">               <span class="title class_">Iic</span>.<span class="title function_">showMessage</span>(<span class="string">&quot;请输入用户账号&quot;</span>);</span><br><span class="line">               <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">pageno</span> = <span class="number">1</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">loadData</span>(<span class="literal">true</span>);</span><br><span class="line">         &#125;,</span><br><span class="line">           <span class="attr">loadData</span>: <span class="keyword">function</span>(<span class="params">searchByAcct</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">            <span class="keyword">var</span> url = <span class="string">&#x27;./mgrapi/user/user-list&#x27;</span>;</span><br><span class="line">            <span class="keyword">if</span> (searchByAcct) &#123;</span><br><span class="line">               url += <span class="string">&quot;?usrAcct=&quot;</span> + <span class="title function_">encodeUrl</span>(<span class="variable language_">this</span>.<span class="property">keyword</span>);</span><br><span class="line">            &#125;</span><br><span class="line">              <span class="keyword">var</span> params = &#123;</span><br><span class="line">                 <span class="attr">pagesize</span>: _this.<span class="property">pageInfo</span>.<span class="property">pagesize</span>,</span><br><span class="line">                 <span class="attr">pageno</span>: _this.<span class="property">pageInfo</span>.<span class="property">pageno</span></span><br><span class="line">              &#125;;</span><br><span class="line">              <span class="title function_">ajaxPost</span>(url,params).<span class="title function_">then</span>(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">                 _this.<span class="property">datas</span> = data.<span class="property">datas</span>;</span><br><span class="line">               _this.<span class="property">pageInfo</span>.<span class="property">recordTotal</span> = data.<span class="property">recordTotal</span>;</span><br><span class="line">               _this.<span class="property">selectAll</span> = <span class="literal">false</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">exeDel</span>: <span class="keyword">function</span>(<span class="params">ids</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              <span class="keyword">var</span> url = <span class="string">&#x27;./mgrapi/user/del&#x27;</span>;</span><br><span class="line">              <span class="keyword">var</span> params = &#123;<span class="attr">ids</span>:ids&#125;;</span><br><span class="line">              <span class="title function_">ajaxPost</span>(url,params).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                 _this.<span class="title function_">loadData</span>();</span><br><span class="line">              &#125;);</span><br><span class="line">           &#125;,</span><br><span class="line">           </span><br><span class="line">           <span class="comment">///////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">           <span class="comment">///////////////////////////////////  默认方法  //////////////////////////////////////////</span></span><br><span class="line">           <span class="comment">///////////////////////////////////////////////////////////////////////////////////////</span></span><br><span class="line">           <span class="attr">onSelectAll</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              _this.<span class="property">selectAll</span> = !_this.<span class="property">selectAll</span>;</span><br><span class="line">              _this.<span class="property">datas</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                 obj.<span class="property">selected</span> = _this.<span class="property">selectAll</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              _this.<span class="property">datas</span> = _this.<span class="property">datas</span>.<span class="title function_">concat</span>([]);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">onSelectOne</span>: <span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">              obj.<span class="property">selected</span> = !obj.<span class="property">selected</span>;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">datas</span> = <span class="variable language_">this</span>.<span class="property">datas</span>.<span class="title function_">concat</span>([]);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">isSelected</span>: <span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(obj.<span class="property">selected</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">              <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">go</span>: <span class="keyword">function</span>(<span class="params">url,id</span>)&#123;</span><br><span class="line">              <span class="keyword">if</span>(id)&#123;</span><br><span class="line">                 url = url.<span class="title function_">replace</span>(<span class="string">&#x27;&#123;id&#125;&#x27;</span>,id);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span> = url;</span><br><span class="line">         &#125;,</span><br><span class="line">          <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 跳转到指定页</span></span><br><span class="line"><span class="comment">             * <span class="doctag">@param</span> &#123;<span class="type">*</span>&#125; pageNo </span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="attr">changePage</span>: <span class="keyword">function</span>(<span class="params">pageNo</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">pageInfo</span>.<span class="property">pageno</span> = pageNo;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">loadData</span>();</span><br><span class="line">            &#125;,</span><br><span class="line">           <span class="attr">edit</span>: <span class="keyword">function</span>(<span class="params">url,id</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              <span class="keyword">if</span>(!id)&#123;</span><br><span class="line">                 <span class="keyword">var</span> datas = <span class="variable language_">this</span>.<span class="title function_">_getSelectedData</span>();</span><br><span class="line">                 <span class="keyword">if</span>(datas.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                     <span class="title function_">showErrAlert</span>(<span class="string">&#x27;操作错误&#x27;</span>,<span class="string">&#x27;请选择要操作的记录&#x27;</span>);</span><br><span class="line">                       <span class="keyword">return</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                 <span class="keyword">if</span>(datas.<span class="property">length</span>&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                    <span class="title function_">showErrAlert</span>(<span class="string">&#x27;操作错误&#x27;</span>,<span class="string">&#x27;只能选择一条记录&#x27;</span>);</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                 &#125;</span><br><span class="line">                 id = datas[<span class="number">0</span>].<span class="property">id</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              url = url.<span class="title function_">replace</span>(<span class="string">&#x27;&#123;id&#125;&#x27;</span>,id);</span><br><span class="line">              <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">hash</span> = url;</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">del</span>: <span class="keyword">function</span>(<span class="params">id</span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> _this = <span class="variable language_">this</span>;</span><br><span class="line">              <span class="keyword">var</span> ids = [];</span><br><span class="line">              </span><br><span class="line">              <span class="keyword">if</span>(!id)&#123;</span><br><span class="line">                 <span class="keyword">var</span> datas = <span class="variable language_">this</span>.<span class="title function_">_getSelectedData</span>();</span><br><span class="line">                  <span class="keyword">if</span>(datas.<span class="property">length</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                     <span class="title function_">showErrAlert</span>(<span class="string">&#x27;操作错误&#x27;</span>,<span class="string">&#x27;请选择要删除的记录&#x27;</span>);</span><br><span class="line">                       <span class="keyword">return</span>;</span><br><span class="line">                  &#125;</span><br><span class="line">                  datas.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                     ids.<span class="title function_">push</span>(obj.<span class="property">id</span>);</span><br><span class="line">                  &#125;);</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 ids=[id];</span><br><span class="line">              &#125;</span><br><span class="line">              </span><br><span class="line">              <span class="title function_">showConfrim</span>(<span class="string">&#x27;确定要删除吗?&#x27;</span>).<span class="title function_">then</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                  _this.<span class="title function_">exeDel</span>(ids.<span class="title function_">join</span>(<span class="string">&#x27;,&#x27;</span>));</span><br><span class="line">              &#125;);</span><br><span class="line">           &#125;,</span><br><span class="line">           <span class="attr">_getSelectedData</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">              <span class="keyword">var</span> res = [];</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">datas</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                 <span class="keyword">if</span>(obj.<span class="property">selected</span>)&#123;</span><br><span class="line">                    res.<span class="title function_">push</span>(obj);</span><br><span class="line">                 &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">return</span> res;</span><br><span class="line">           &#125;,</span><br><span class="line">            <span class="title function_">onClickCacheAllBus</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="title function_">showConfrim</span>(<span class="string">&#x27;确认刷新所有业务缓存&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">var</span> url = <span class="string">&#x27;/mgrapi/user/bus/cache/all&#x27;</span>;</span><br><span class="line">                    <span class="title function_">ajaxPost</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">showSuccAlert</span>(<span class="string">&quot;任务提交成功&quot;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">onClickCacheBus</span>(<span class="params">obj</span>)&#123;</span><br><span class="line">                <span class="title function_">showConfrim</span>(<span class="string">&#x27;确认刷新业务缓存&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> url = <span class="string">&#x27;/mgrapi/user/bus/cache?username=&#x27;</span> + obj.<span class="property">userName</span>;</span><br><span class="line">                    <span class="title function_">ajaxPost</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">showSuccAlert</span>(<span class="string">&#x27;操作成功&#x27;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">cacheAdmBus</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="title function_">showConfrim</span>(<span class="string">&#x27;确认刷新业务缓存&#x27;</span>).<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">const</span> url = <span class="string">&#x27;/mgrapi/user/bus/cache/adm&#x27;</span>;</span><br><span class="line">                    <span class="title function_">ajaxPost</span>(url).<span class="title function_">then</span>(<span class="function"><span class="params">rs</span> =&gt;</span> &#123;</span><br><span class="line">                        <span class="title function_">showSuccAlert</span>(<span class="string">&#x27;任务提交成功&#x27;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">template</span>: tpl</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="6-4-MgrUserController"><a href="#6-4-MgrUserController" class="headerlink" title="6.4 MgrUserController"></a>6.4 MgrUserController</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.Log;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.logging.LogFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lll.framework.controller.JsonResult;</span><br><span class="line"><span class="keyword">import</span> cn.lll.framework.exception.BusException;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.common.ListPageVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.common.MgrBaseController;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.model.RoleVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.model.UserVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.service.IMgrUserService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/mgrapi/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MgrUserController</span> <span class="keyword">extends</span> <span class="title class_">MgrBaseController</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Log</span> <span class="variable">log</span> <span class="operator">=</span> LogFactory.getLog(MgrUserController.class);</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IMgrUserService iMgrUserService;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;读取用户列表&quot;, notes = &quot;读取用户列表&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user-list&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">loadUserList</span><span class="params">(Integer pagesize, Integer pageno, String usrAcct)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         ListPageVo&lt;UserVo&gt; vo = iMgrUserService.loadUserList(pagesize, pageno, usrAcct);</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(vo, <span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;添加用户&quot;, notes = &quot;添加用户&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/add&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">add</span><span class="params">(UserVo vo)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         iMgrUserService.addUser(vo);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;添加成功&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;读取用户详细信息&quot;, notes = &quot;读取用户详细信息&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/detail&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">loadUserDetail</span><span class="params">(String id)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         <span class="type">UserVo</span> <span class="variable">vo</span> <span class="operator">=</span> iMgrUserService.loadUserDetail(id);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(vo,<span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;读取所有角色&quot;, notes = &quot;读取所有角色&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/load-all-user-role&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">loadAllUserRole</span><span class="params">(String userId)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         List&lt;RoleVo&gt; datas = iMgrUserService.loadAllUserRole(userId);</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(datas, <span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;修改用户角色&quot;, notes = &quot;修改用户角色&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/update-user-role&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">updateUserRole</span><span class="params">(String userId, String roles)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         iMgrUserService.updateUserRole(userId, roles);</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;删除用户&quot;, notes = &quot;删除用户&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/del&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">deleteUser</span><span class="params">(String ids)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         iMgrUserService.deleteUser(ids);</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="meta">@ApiOperation(value = &quot;修改用户&quot;, notes = &quot;修改用户&quot;, httpMethod = &quot;POST&quot;)</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/update-user&quot;, method = RequestMethod.POST)</span></span><br><span class="line">   <span class="keyword">public</span> JsonResult <span class="title function_">updateUser</span><span class="params">(UserVo vo)</span>&#123;</span><br><span class="line">      <span class="keyword">try</span>&#123;</span><br><span class="line">         iMgrUserService.updateUser(vo);</span><br><span class="line">         </span><br><span class="line">         <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>);</span><br><span class="line">      &#125;<span class="keyword">catch</span>(BusException ex)&#123;</span><br><span class="line">         log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">         <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">//将某用户的标识业务id接入redis</span></span><br><span class="line">   <span class="meta">@PostMapping(path = &quot;/bus/cache&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">cacheBus</span><span class="params">(<span class="meta">@RequestParam</span> String username)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            iMgrUserService.cacheBus(username);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BusException ex) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将admin的标识业务id接入redis</span></span><br><span class="line">    <span class="meta">@PostMapping(path = &quot;/bus/cache/adm&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">cacheAllBusForAdm</span><span class="params">()</span>&#123;</span><br><span class="line">        iMgrUserService.cacheAdmBus();</span><br><span class="line">        <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//将所有非admin用户的标识业务id接入redis</span></span><br><span class="line">    <span class="meta">@PostMapping(path = &quot;/bus/cache/all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">cacheAllBus</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            iMgrUserService.cacheAllBus();</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createSuccess(<span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (BusException ex) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">            <span class="keyword">return</span> JsonResult.createFail(ex);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-IMgrUserService"><a href="#6-5-IMgrUserService" class="headerlink" title="6.5 IMgrUserService"></a>6.5 IMgrUserService</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.lll.framework.exception.BusException;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.common.ListPageVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.model.RoleVo;</span><br><span class="line"><span class="keyword">import</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.model.UserVo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IMgrUserService</span></span><br></pre></td></tr></table></figure>

<h2 id="6-6-MgrUserServiceImpl"><a href="#6-6-MgrUserServiceImpl" class="headerlink" title="6.6 MgrUserServiceImpl"></a>6.6 MgrUserServiceImpl</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.ssp.mgr.<span class="keyword">module</span>.admin.user.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MgrUserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IMgrUserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">LOG</span> <span class="operator">=</span> LogFactory.getLog(MgrUserServiceImpl.class);</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IGdssUserTeUserService iGdssUserTeUserService;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IGdssUserTsUserCompanyService iGdssUserTsUserCompanyService;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IGdssUserTeCompanyService iGdssUserTeCompanyService;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IGdssCfgTeConfigService iGdssCfgTeConfigService;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IGdssAuthTeRoleService iGdssAuthTeRoleService;</span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> IGdssAuthTsUserRoleService iGdssAuthTsUserRoleService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ISecService iSecService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ICfgService iCfgService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ThreadPoolExecutor threadPoolExecutor;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IGdssSecTeKeyService iGdssSecTeKeyService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IGdssBusTeApiBusinessService iGdssBusTeApiBusinessService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IGdssStatTeHistoryAmountsDayMwService iGdssStatTeHistoryAmountsDayMwService;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> ListPageVo&lt;UserVo&gt; <span class="title function_">loadUserList</span><span class="params">(Integer pagesize, Integer pageno, String usrAcct)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="type">GdssUserTeUser</span> <span class="variable">params</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssUserTeUser</span>();</span><br><span class="line">      params.setOrderBy(<span class="string">&quot; CREATE_TIME DESC&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (!StringUtil.isEmpty(usrAcct))&#123;</span><br><span class="line">         params.setUserName(usrAcct);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      List&lt;GdssUserTeUser&gt; ls = iGdssUserTeUserService.searchEntity(params, pagesize, pageno);</span><br><span class="line">      </span><br><span class="line">      List&lt;UserVo&gt; datas = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;UserVo&gt;();</span><br><span class="line">      <span class="keyword">for</span>(GdssUserTeUser user : ls)&#123;</span><br><span class="line">         <span class="type">UserVo</span> <span class="variable">v</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVo</span>();</span><br><span class="line">         v.setId(user.getId());</span><br><span class="line">         v.setUserName(StringUtil.trim(user.getUserName()));</span><br><span class="line">         v.setNickname(StringUtil.trim(user.getNickname()));</span><br><span class="line">         v.setStatus(user.getStatus());</span><br><span class="line">         <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> v.getUserName();</span><br><span class="line">         v.setLanguage(<span class="built_in">this</span>.getLan(username));</span><br><span class="line"></span><br><span class="line">         v.setMobile(StringUtil.trim(user.getMobile()));</span><br><span class="line">         v.setEmail(StringUtil.trim(user.getEmail()));</span><br><span class="line">         v.setAuthMobile(user.getAuthMobile());</span><br><span class="line">         v.setAuthEmail(user.getAuthEmail());</span><br><span class="line">         v.setCreateTime(user.getCreateTime());</span><br><span class="line">         </span><br><span class="line">         <span class="comment">//读取用户角色</span></span><br><span class="line">         List&lt;GdssAuthTeRoleDao&gt; roles = iGdssAuthTeRoleService.searchUserRoleByUserId(user.getId());</span><br><span class="line">         List&lt;String&gt; roleCodes = roles.stream().map(item -&gt; item.getCode()).collect(Collectors.toList());</span><br><span class="line">         List&lt;String&gt; roleNames = roles.stream().map(item -&gt; item.getName()).collect(Collectors.toList());</span><br><span class="line">         v.setRoleCodes(roleCodes);</span><br><span class="line">         v.setRoleNames(roleNames);</span><br><span class="line">         </span><br><span class="line">         datas.add(v);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="type">int</span> <span class="variable">recordTotal</span> <span class="operator">=</span> iGdssUserTeUserService.count(params);</span><br><span class="line">      <span class="comment">//绑定接入状态</span></span><br><span class="line">        bindAccessStatus(datas);</span><br><span class="line">      <span class="keyword">return</span> ListPageVo.create(datas, recordTotal);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">private</span>  String <span class="title function_">getLan</span><span class="params">(String username)</span>&#123;</span><br><span class="line">      <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> username.lastIndexOf(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">      String[] lanArr = <span class="string">&quot;Java,C++,Java,Java,C#,Java,PHP,Java,Java,Go,C++,Java,Java,Java,Java,Node.js,Java&quot;</span>.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (index &gt; <span class="number">0</span>)&#123;</span><br><span class="line">         <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> username.substring(index+<span class="number">1</span>);</span><br><span class="line">         <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> ToolUtil.parseInt(suffix,<span class="number">0</span>) % lanArr.length;</span><br><span class="line">         <span class="type">String</span> <span class="variable">lan</span> <span class="operator">=</span> lanArr[count];</span><br><span class="line">         <span class="keyword">if</span> (username.equals(<span class="string">&quot;88.168.251&quot;</span>))&#123;</span><br><span class="line">            lan = <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (username.equals(<span class="string">&quot;88.168.288&quot;</span>))&#123;</span><br><span class="line">            lan = <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (username.equals(<span class="string">&quot;88.168.200&quot;</span>))&#123;</span><br><span class="line">            lan = <span class="string">&quot;C#&quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (username.equals(<span class="string">&quot;88.168.313&quot;</span>))&#123;</span><br><span class="line">            lan = <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (username.equals(<span class="string">&quot;88.168.263&quot;</span>))&#123;</span><br><span class="line">            lan = <span class="string">&quot;PHP&quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (username.equals(<span class="string">&quot;88.168.352&quot;</span>))&#123;</span><br><span class="line">            lan = <span class="string">&quot;C++&quot;</span>;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> lan;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="keyword">return</span>  <span class="string">&quot;Java&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">//绑定接入状态</span></span><br><span class="line">   <span class="keyword">private</span> List&lt;UserVo&gt; <span class="title function_">bindAccessStatus</span><span class="params">(List&lt;UserVo&gt; datas)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">       <span class="keyword">if</span> (datas == <span class="literal">null</span> || datas.isEmpty()) <span class="keyword">return</span> datas;</span><br><span class="line"></span><br><span class="line">       Set&lt;String&gt; userIds = datas.stream().map(item -&gt; item.getId()).collect(Collectors.toSet());</span><br><span class="line">       <span class="comment">//查询关联企业</span></span><br><span class="line">        <span class="type">GdssUserTsUserCompany</span> <span class="variable">tsParam</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssUserTsUserCompany</span>();</span><br><span class="line">        tsParam.setUserIdIn(userIds);</span><br><span class="line">        List&lt;GdssUserTsUserCompany&gt; tsList = iGdssUserTsUserCompanyService.searchEntity(tsParam, <span class="number">10_000</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tsList == <span class="literal">null</span> || tsList.isEmpty()) <span class="keyword">return</span> datas;</span><br><span class="line"></span><br><span class="line">        List&lt;String&gt; companyIds = tsList.stream().map(item -&gt; item.getCompanyId()).collect(Collectors.toList());</span><br><span class="line">        <span class="comment">//查前缀</span></span><br><span class="line">        <span class="type">GdssUserTeCompany</span> <span class="variable">companyParam</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssUserTeCompany</span>();</span><br><span class="line">        companyParam.setIdIn(companyIds);</span><br><span class="line">        List&lt;GdssUserTeCompany&gt; companyList = iGdssUserTeCompanyService.searchEntity(companyParam, <span class="number">10_000</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (companyList == <span class="literal">null</span> || companyList.isEmpty()) <span class="keyword">return</span> datas;</span><br><span class="line"></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; userTsMwCodeMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        Set&lt;String&gt; allMwCodes = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="type">String</span> <span class="variable">appEnv</span> <span class="operator">=</span> SpringUtil.getEnvironment();</span><br><span class="line">        <span class="keyword">for</span> (UserVo userVo : datas) &#123;</span><br><span class="line">            List&lt;String&gt; companyIdList = tsList.stream().filter(item -&gt; item.getUserId().equals( userVo.getId() ))</span><br><span class="line">                    .map(item -&gt; item.getCompanyId()).collect(Collectors.toList());</span><br><span class="line">            <span class="comment">//筛选前缀</span></span><br><span class="line">            List&lt;String&gt; mwCodes = companyList.stream().filter(item -&gt; companyIdList.contains( item.getId() ))</span><br><span class="line">                    .map(item -&gt; HandleUtil.getMwCodeByPrefix(item.getHandle(), appEnv)).collect(Collectors.toList());</span><br><span class="line">            <span class="keyword">if</span> ( !mwCodes.isEmpty() )&#123;</span><br><span class="line">                userTsMwCodeMap.put(userVo.getId(), mwCodes);</span><br><span class="line">                allMwCodes.addAll(mwCodes);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//查统计信息</span></span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">now</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        <span class="type">GdssStatTeHistoryAmountsDayMw</span> <span class="variable">statParam</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssStatTeHistoryAmountsDayMw</span>();</span><br><span class="line">        statParam.setYearer( now.get(Calendar.YEAR) );</span><br><span class="line">        statParam.setMonther( now.get(Calendar.MONTH) + <span class="number">1</span> );</span><br><span class="line">        statParam.setDateer( now.get(Calendar.DAY_OF_MONTH) );</span><br><span class="line">        statParam.setMwCodeIn(allMwCodes);</span><br><span class="line">        List&lt;GdssStatTeHistoryAmountsDayMw&gt; statList = iGdssStatTeHistoryAmountsDayMwService.searchEntity(statParam, <span class="number">10_000</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (statList == <span class="literal">null</span> || statList.isEmpty()) <span class="keyword">return</span> datas;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (UserVo userVo : datas) &#123;</span><br><span class="line">            List&lt;String&gt; userMwCodes = userTsMwCodeMap.get( userVo.getId() );</span><br><span class="line">            <span class="keyword">if</span> (userMwCodes == <span class="literal">null</span> || userMwCodes.isEmpty()) <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">            List&lt;GdssStatTeHistoryAmountsDayMw&gt; tempStat = statList.stream().filter(item -&gt; userMwCodes.contains( item.getMwCode() )).collect(Collectors.toList());</span><br><span class="line">            <span class="keyword">if</span> ( tempStat.isEmpty() ) <span class="keyword">continue</span>;</span><br><span class="line">            userVo.setAccessStatus(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> datas;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser</span><span class="params">(UserVo vo)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="comment">//<span class="doctag">TODO:</span> 判断账号是否重复</span></span><br><span class="line">      <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> iGdssUserTeUserService.isRepeatUserName(vo.getUserName());</span><br><span class="line">      <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusException</span>(<span class="string">&quot;00400013&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//<span class="doctag">TODO:</span> 从配置中心读取用户默认密码</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> <span class="built_in">this</span>.readDefaultPwd();</span><br><span class="line">      pwd = Base64Util.String2SHA256(pwd);</span><br><span class="line">      <span class="comment">//<span class="doctag">TODO:</span> 创建用户</span></span><br><span class="line">      <span class="type">GdssUserTeUser</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssUserTeUser</span>();</span><br><span class="line">      BeanUtils.copyProperties(vo, user);</span><br><span class="line"></span><br><span class="line">      user.setUserName(StringUtil.trim(user.getUserName()));</span><br><span class="line">      user.setMobile(StringUtil.trim(user.getMobile()));</span><br><span class="line">      user.setEmail(StringUtil.trim(user.getEmail()));</span><br><span class="line">      user.setNickname(StringUtil.trim(user.getNickname()));</span><br><span class="line">      user.setPwd(pwd);</span><br><span class="line">      user.setStatus(GdssUserTeUser.Info.STATUS_VALID);</span><br><span class="line">      user.setAuthMobile(<span class="number">0</span>);</span><br><span class="line">      user.setAuthEmail(<span class="number">0</span>);</span><br><span class="line">      user.setCreateTime(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">        user.setAlteredPwd( (<span class="type">byte</span>)<span class="number">0</span> );</span><br><span class="line">      user.setId( UUID.getUUID() );</span><br><span class="line">      </span><br><span class="line">      iGdssUserTeUserService.addEntity(user);</span><br><span class="line">      <span class="comment">//如果是系统管理员,则默认分配系统管理员角色</span></span><br><span class="line">      <span class="keyword">if</span>(user.getType()==GdssUserTeUser.Info.TYPE_SYSTEM)&#123;</span><br><span class="line">         <span class="type">GdssAuthTeRoleDao</span> <span class="variable">role</span> <span class="operator">=</span> iGdssAuthTeRoleService.getEntityByCode(<span class="string">&quot;system&quot;</span>);</span><br><span class="line">         <span class="type">GdssAuthTsUserRole</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssAuthTsUserRole</span>();</span><br><span class="line">         r.setRoleId(role.getId());</span><br><span class="line">         r.setUserId(user.getId());</span><br><span class="line">         iGdssAuthTsUserRoleService.addEntity(r);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//如果是一般用户，默认分配一般用户角色</span></span><br><span class="line">      <span class="keyword">if</span>(user.getType()==GdssUserTeUser.Info.TYPE_COMMON)&#123;</span><br><span class="line">         <span class="type">GdssAuthTeRoleDao</span> <span class="variable">role</span> <span class="operator">=</span> iGdssAuthTeRoleService.getEntityByCode(<span class="string">&quot;common&quot;</span>);</span><br><span class="line">         <span class="type">GdssAuthTsUserRole</span> <span class="variable">r</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssAuthTsUserRole</span>();</span><br><span class="line">         r.setRoleId(role.getId());</span><br><span class="line">         r.setUserId(user.getId());</span><br><span class="line">         iGdssAuthTsUserRoleService.addEntity(r);</span><br><span class="line">      &#125;</span><br><span class="line">        <span class="comment">//<span class="doctag">TODO:</span> 创建用户密钥</span></span><br><span class="line">        iSecService.createUserKeyPair(vo.getUserName(), user.getId());</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> UserVo <span class="title function_">loadUserDetail</span><span class="params">(String id)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="type">GdssUserTeUser</span> <span class="variable">user</span> <span class="operator">=</span> iGdssUserTeUserService.getEntityById(id);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//读取用户账号关联的角色</span></span><br><span class="line">      List&lt;GdssAuthTeRoleDao&gt; roles = iGdssAuthTeRoleService.searchUserRoleByUserId(id);</span><br><span class="line">      List&lt;String&gt; roleCodes = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt; (roles.size() );</span><br><span class="line">      List&lt;String&gt; roleNames = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;( roles.size() );</span><br><span class="line">      <span class="keyword">for</span>(GdssAuthTeRoleDao role : roles)&#123;</span><br><span class="line">         roleCodes.add(role.getCode());</span><br><span class="line">         roleNames.add(role.getName());</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="type">UserVo</span> <span class="variable">vo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVo</span>();</span><br><span class="line">        BeanUtils.copyProperties(user, vo);</span><br><span class="line">      vo.setRoleCodes(roleCodes);</span><br><span class="line">      vo.setRoleNames(roleNames);</span><br><span class="line">      <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> vo.getUserName();</span><br><span class="line">      vo.setLanguage(<span class="built_in">this</span>.getLan(username));</span><br><span class="line">      <span class="comment">//绑定</span></span><br><span class="line">        bindAccessStatus( Arrays.asList(vo) );</span><br><span class="line">      <span class="keyword">return</span> vo;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> List&lt;RoleVo&gt; <span class="title function_">loadAllUserRole</span><span class="params">(String userId)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="type">GdssAuthTeRoleDao</span> <span class="variable">params</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssAuthTeRoleDao</span>();</span><br><span class="line">      params.setOrderBy(<span class="string">&quot; CODE ASC&quot;</span>);</span><br><span class="line">      List&lt;GdssAuthTeRoleDao&gt; all = iGdssAuthTeRoleService.searchEntity(params,<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">      </span><br><span class="line">      List&lt;GdssAuthTsUserRole&gt; roles = iGdssAuthTsUserRoleService.searchByUserId(userId);</span><br><span class="line">      </span><br><span class="line">      List&lt;RoleVo&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;RoleVo&gt;();</span><br><span class="line">      <span class="keyword">for</span>(GdssAuthTeRoleDao role : all)&#123;</span><br><span class="line">         <span class="type">RoleVo</span> <span class="variable">vo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoleVo</span>();</span><br><span class="line">         vo.setId(role.getId());</span><br><span class="line">         vo.setCode(role.getCode());</span><br><span class="line">         vo.setName(role.getName());</span><br><span class="line">         vo.setRemark(role.getRemark());</span><br><span class="line">         </span><br><span class="line">         <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">         <span class="keyword">for</span>(GdssAuthTsUserRole r : roles)&#123;</span><br><span class="line">            <span class="keyword">if</span>(r.getRoleId().equals(role.getId()))&#123;</span><br><span class="line">               flag = <span class="literal">true</span>;</span><br><span class="line">               <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            vo.setAuth(RoleVo.Info.AUTH_YES);</span><br><span class="line">         &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            vo.setAuth(RoleVo.Info.AUTH_NO);</span><br><span class="line">         &#125;</span><br><span class="line">         </span><br><span class="line">         res.add(vo);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUserRole</span><span class="params">(String userId, String roles)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="comment">//<span class="doctag">TODO:</span> 删除账号所有角色</span></span><br><span class="line">      iGdssAuthTsUserRoleService.deleteByUserId(userId);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//<span class="doctag">TODO:</span> 添加关联的角色</span></span><br><span class="line">      String[] roleIds = roles.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;roleIds.length;i++)&#123;</span><br><span class="line">         <span class="type">String</span> <span class="variable">roleId</span> <span class="operator">=</span> roleIds[i];</span><br><span class="line">         <span class="type">GdssAuthTsUserRole</span> <span class="variable">role</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssAuthTsUserRole</span>();</span><br><span class="line">         role.setUserId(userId);</span><br><span class="line">         role.setRoleId(roleId);</span><br><span class="line">         iGdssAuthTsUserRoleService.addEntity(role);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteUser</span><span class="params">(String ids)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      String[] idArg = ids.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">      <span class="comment">//如果包含超级管理员，则报错</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;idArg.length;i++)&#123;</span><br><span class="line">         <span class="keyword">if</span>(GdssUserTeUser.ID_ADMIN.equals(idArg[i]))&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusException</span>(<span class="string">&quot;00400022&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> idArg[i];</span><br><span class="line">         List&lt;GdssUserTsUserCompany&gt; list = iGdssUserTsUserCompanyService.searchByUserId(id);</span><br><span class="line">         <span class="keyword">if</span>(list!=<span class="literal">null</span>&amp;&amp;list.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusException</span>(<span class="string">&quot;00430010&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;idArg.length;i++)&#123;</span><br><span class="line">         <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> idArg[i];</span><br><span class="line">         <span class="comment">//删除相关的角色关系</span></span><br><span class="line">         iGdssAuthTsUserRoleService.deleteByUserId(id);</span><br><span class="line">            <span class="type">GdssUserTeUser</span> <span class="variable">thisUser</span> <span class="operator">=</span> iGdssUserTeUserService.getEntityById(id);</span><br><span class="line">         <span class="comment">//删除用户</span></span><br><span class="line">         iGdssUserTeUserService.delEntityById(id, <span class="literal">null</span>);</span><br><span class="line">         <span class="keyword">if</span> (thisUser != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">//删除企业的密钥</span></span><br><span class="line">                iGdssSecTeKeyService.deleteByUsername(thisUser.getUserName());</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUser</span><span class="params">(UserVo vo)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">      <span class="type">GdssUserTeUser</span> <span class="variable">user</span> <span class="operator">=</span> iGdssUserTeUserService.getEntityById(vo.getId());</span><br><span class="line">      <span class="keyword">if</span>(user==<span class="literal">null</span>)&#123;</span><br><span class="line">         <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusException</span>(<span class="string">&quot;00000005&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      user.setNickname(StringUtil.trim(vo.getNickname()));</span><br><span class="line">      user.setMobile(StringUtil.trim(vo.getMobile()));</span><br><span class="line">      user.setEmail(StringUtil.trim(vo.getEmail()));</span><br><span class="line">      user.setAuditPower( vo.getAuditPower() );</span><br><span class="line">      iGdssUserTeUserService.updateEntityById(user, user.getId(), user.getId());</span><br><span class="line">      </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String <span class="title function_">readDefaultPwd</span><span class="params">()</span> <span class="keyword">throws</span> BusException&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">cfgCode</span> <span class="operator">=</span> <span class="string">&quot;SSP_USER_DEFAULT_PWD&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">pwd</span> <span class="operator">=</span> iCfgService.getCfgString(cfgCode);</span><br><span class="line">        <span class="keyword">if</span> (!StringUtil.isEmpty(pwd))&#123;</span><br><span class="line">            <span class="keyword">return</span> pwd;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">GdssCfgTeConfig</span> <span class="variable">cfg</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssCfgTeConfig</span>();</span><br><span class="line">        cfg.setCode(cfgCode);</span><br><span class="line">        cfg.setCfgValue(<span class="string">&quot;gdxx688&quot;</span>);</span><br><span class="line">        cfg.setRemark(<span class="string">&quot;用户默认密码&quot;</span>);</span><br><span class="line">        cfg = iGdssCfgTeConfigService.addEntity(cfg);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> cfg.getCfgValue();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cacheBus</span><span class="params">(String username)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">       <span class="keyword">if</span> (GdssUserTeUser.Info.ADM_USERNAME.equals(username))&#123;</span><br><span class="line">           threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    cacheBusByUser(username);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (BusException e) &#123; LOG.error(<span class="string">&quot;&quot;</span>, e); &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cacheBusByUser(username);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cacheBusByUser</span><span class="params">(String username)</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">       <span class="keyword">if</span> ( ToolUtil.isNull(username) ) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">       Map&lt;String, List&lt;String&gt;&gt; codeKeyMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">4</span>);</span><br><span class="line">        codeKeyMap.put(GdssBusTeApiBusiness.Info.CACHE_BUS_API2_CREATE_PREFIX, Arrays.asList(ApiCodeEnum.CREATE_IDENTIFIER.name()));</span><br><span class="line">        codeKeyMap.put(GdssBusTeApiBusiness.Info.CACHE_BUS_API2_MODIFY_PREFIX, Arrays.asList(ApiCodeEnum.ADD_IDENTIFIER_ATTR.name(), ApiCodeEnum.MODIFY_IDENTIFIER_ATTR.name(), ApiCodeEnum.REMOVE_IDENTIFIER_ATTR.name()) );</span><br><span class="line">        codeKeyMap.put(GdssBusTeApiBusiness.Info.CACHE_BUS_API2_DEL_PREFIX, Arrays.asList(ApiCodeEnum.REMOVE_IDENTIFIER.name()) );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : codeKeyMap.entrySet()) &#123;</span><br><span class="line">            List&lt;String&gt; codes = entry.getValue();</span><br><span class="line">            <span class="type">GdssBusTeApiBusiness</span> <span class="variable">param</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssBusTeApiBusiness</span>();</span><br><span class="line">            param.setUsername(username);</span><br><span class="line">            param.setApiCodeList(codes);</span><br><span class="line">            param.setOrderBy(<span class="string">&quot;CREATE_TIME desc&quot;</span>);</span><br><span class="line">            List&lt;GdssBusTeApiBusiness&gt; businessesList = iGdssBusTeApiBusinessService.searchEntity(param, GdssBusTeApiBusiness.Info.BUS_API_CACHE_LIMIT, <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">if</span> (businessesList == <span class="literal">null</span> || businessesList.isEmpty()) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey() + username;</span><br><span class="line">            List&lt;List&lt;String&gt;&gt; idHandleList = businessesList.stream().map(item -&gt; Arrays.asList(item.getId(), item.getHandle())).collect(Collectors.toList());</span><br><span class="line">            saveBusToRedis(key, idHandleList);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveBusToRedis</span><span class="params">(String key, List&lt;List&lt;String&gt;&gt; cacheList)</span>&#123;</span><br><span class="line">        redisTemplate.execute(<span class="keyword">new</span> <span class="title class_">SessionCallback</span>&lt;List&lt;Object&gt;&gt;() &#123;</span><br><span class="line">            <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">execute</span><span class="params">(RedisOperations operations)</span> <span class="keyword">throws</span> DataAccessException &#123;</span><br><span class="line">                operations.multi();</span><br><span class="line">                operations.delete(key);</span><br><span class="line">                <span class="keyword">if</span> ( !cacheList.isEmpty() )&#123;</span><br><span class="line">                    operations.opsForList().rightPushAll(key, cacheList);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> operations.exec();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cacheAdmBus</span><span class="params">()</span> &#123;</span><br><span class="line">       threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">           <span class="comment">//admin成功</span></span><br><span class="line">            <span class="type">GdssBusTeApiBusiness</span> <span class="variable">param</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssBusTeApiBusiness</span>();</span><br><span class="line">            param.setResult(ApiBusinessInstance.Info.RESULT_SUCCESS);</span><br><span class="line">            param.setOrderBy(<span class="string">&quot;CREATE_TIME desc&quot;</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                List&lt;GdssBusTeApiBusiness&gt; businessesList = iGdssBusTeApiBusinessService.searchEntity(param, GdssBusTeApiBusiness.Info.BUS_API_CACHE_LIMIT, <span class="number">1</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> GdssBusTeApiBusiness.Info.CACHE_BUS_API2_SUC_PREFIX + GdssUserTeUser.Info.ADM_USERNAME;</span><br><span class="line">                cacheAdminBusToRedis(businessesList, key);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex)&#123;</span><br><span class="line">                LOG.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//admin错误业务</span></span><br><span class="line">            param.setResult(ApiBusinessInstance.Info.RESULT_FAILURE);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                List&lt;GdssBusTeApiBusiness&gt; businessesList = iGdssBusTeApiBusinessService.searchEntity(param, GdssBusTeApiBusiness.Info.BUS_API_CACHE_LIMIT, <span class="number">1</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> GdssBusTeApiBusiness.Info.CACHE_BUS_API2_ERROR_PREFIX + GdssUserTeUser.Info.ADM_USERNAME;</span><br><span class="line">                cacheAdminBusToRedis(businessesList, key);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception ex)&#123;</span><br><span class="line">                LOG.error(<span class="string">&quot;&quot;</span>, ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cacheAdminBusToRedis</span><span class="params">(List&lt;GdssBusTeApiBusiness&gt; businessesList, String key)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (businessesList != <span class="literal">null</span> &amp;&amp; !businessesList.isEmpty())&#123;</span><br><span class="line">            List&lt;List&lt;String&gt;&gt; idHandleList = businessesList.stream().map(item -&gt; Arrays.asList(item.getId(), item.getHandle())).collect(Collectors.toList());</span><br><span class="line">            <span class="comment">//先push，再清除</span></span><br><span class="line">            saveBusToRedis(key, idHandleList);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cacheAllBus</span><span class="params">()</span> <span class="keyword">throws</span> BusException &#123;</span><br><span class="line">        <span class="comment">//查所有开通普通用户</span></span><br><span class="line">        <span class="type">GdssUserTeUser</span> <span class="variable">param</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GdssUserTeUser</span>();</span><br><span class="line">        param.setType(GdssUserTeUser.Info.TYPE_COMMON);</span><br><span class="line">        param.setStatus(GdssUserTeUser.Info.STATUS_VALID);</span><br><span class="line">        List&lt;GdssUserTeUser&gt; userList = iGdssUserTeUserService.searchEntity(param, <span class="number">10_000</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (userList == <span class="literal">null</span> || userList.isEmpty()) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">        threadPoolExecutor.submit(() -&gt; &#123;</span><br><span class="line">            <span class="keyword">for</span> (GdssUserTeUser user : userList) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    cacheBusByUser( user.getUserName() );</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception ex)&#123; LOG.error(<span class="string">&quot;&quot;</span>, ex); &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-7-IGdssUserTeUserService"><a href="#6-7-IGdssUserTeUserService" class="headerlink" title="6.7 IGdssUserTeUserService"></a>6.7 IGdssUserTeUserService</h2><p>usercenter-dao-service  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.user.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IGdssUserTeUserService</span> <span class="keyword">extends</span> <span class="title class_">ILllDbRedisBaseService</span>&lt;GdssUserTeUser&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-8-GdssUserTeUserServiceImpl"><a href="#6-8-GdssUserTeUserServiceImpl" class="headerlink" title="6.8 GdssUserTeUserServiceImpl"></a>6.8 GdssUserTeUserServiceImpl</h2><p>usercenter-dao-service-impl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.user.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GdssUserTeUserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">IGdssUserTeUserService</span>&#123;</span><br><span class="line">	<span class="meta">@Autowired</span></span><br><span class="line">	<span class="keyword">private</span> IGdssUserTeUserMapper iGdssUserTeUserMapper;</span><br><span class="line">	</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="6-9-IGdssUserTeUserMapper"><a href="#6-9-IGdssUserTeUserMapper" class="headerlink" title="6.9 IGdssUserTeUserMapper"></a>6.9 IGdssUserTeUserMapper</h2><p>usercenter-dao-mapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.lll.iic.user.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IGdssUserTeUserMapper</span> <span class="keyword">extends</span> <span class="title class_">ILllBaseMapper</span>&lt;GdssUserTeUser&gt;</span><br></pre></td></tr></table></figure>



<h2 id="6-10-mybatis-GdssUserTeUser-xml"><a href="#6-10-mybatis-GdssUserTeUser-xml" class="headerlink" title="6.10 mybatis-GdssUserTeUser.xml"></a>6.10 mybatis-GdssUserTeUser.xml</h2><p>usercenter-dao-resource</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.lll.iic.user.mapper.IGdssUserTeUserMapper&quot;</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;GdssUserTeUserMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.lll.iic.user.model.GdssUserTeUser&quot;</span> &gt;</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>invincible-nerd
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://invincible-nerd.github.io/2022/04/24/ssp/" title="ssp">http://invincible-nerd.github.io/2022/04/24/ssp/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Springboot/" rel="tag"># Springboot</a>
              <a href="/tags/Mybatis/" rel="tag"># Mybatis</a>
              <a href="/tags/Vue/" rel="tag"># Vue</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/04/24/filecenter/" rel="prev" title="filecenter">
      <i class="fa fa-chevron-left"></i> filecenter
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/04/28/sliding-window/" rel="next" title="sliding window">
      sliding window <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-cfgcenter"><span class="nav-number">1.</span> <span class="nav-text">1. cfgcenter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-cfg-api"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 cfg-api</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-cfg-provider"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 cfg-provider</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-1-CfgServiceImpl-java"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.2.1 CfgServiceImpl.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-2-CfgcenterProviderApp"><span class="nav-number">1.2.2.</span> <span class="nav-text">1.2.2 CfgcenterProviderApp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-3-TestCfgService-java"><span class="nav-number">1.2.3.</span> <span class="nav-text">1.2.3 TestCfgService.java</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-cfg-dao"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 cfg-dao</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-1-xml-mybatis-GdssCfgTeConfig-xml"><span class="nav-number">1.3.1.</span> <span class="nav-text">1.3.1 xml    mybatis-GdssCfgTeConfig.xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-2-mapper-IGdssCfgTeConfigMapper-java"><span class="nav-number">1.3.2.</span> <span class="nav-text">1.3.2 mapper    IGdssCfgTeConfigMapper.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-3-model-GdssCfgConfig-java"><span class="nav-number">1.3.3.</span> <span class="nav-text">1.3.3 model    GdssCfgConfig.java</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-4-service-IGdssCfgConfigService-java-GdssCfgTeConfigServiceImpl-java"><span class="nav-number">1.3.4.</span> <span class="nav-text">1.3.4 service    IGdssCfgConfigService.java, GdssCfgTeConfigServiceImpl.java</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-app-ssp-mgr-module-conf"><span class="nav-number">2.</span> <span class="nav-text">2. app-ssp-mgr-module-conf</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-controller"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 controller</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-model"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 model</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-service"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 service</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Spring-boot%E6%B3%A8%E8%A7%A3-amp-%E9%85%8D%E7%BD%AE"><span class="nav-number">3.</span> <span class="nav-text">3. Spring boot注解&amp;配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 常用注解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-Configuration"><span class="nav-number">3.1.1.</span> <span class="nav-text">3.1.1 @Configuration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-Bean"><span class="nav-number">3.1.2.</span> <span class="nav-text">3.1.2 @Bean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-Component"><span class="nav-number">3.1.3.</span> <span class="nav-text">3.1.3 @Component</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-4-Controller"><span class="nav-number">3.1.4.</span> <span class="nav-text">3.1.4 @Controller</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-5-Service"><span class="nav-number">3.1.5.</span> <span class="nav-text">3.1.5 @Service</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-6-Repository"><span class="nav-number">3.1.6.</span> <span class="nav-text">3.1.6 @Repository</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-7-Required"><span class="nav-number">3.1.7.</span> <span class="nav-text">3.1.7 @Required</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-8-Autowired%E5%92%8C-Resource"><span class="nav-number">3.1.8.</span> <span class="nav-text">3.1.8 @Autowired和@Resource</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-9-Qualifier"><span class="nav-number">3.1.9.</span> <span class="nav-text">3.1.9 @Qualifier</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-10-RequestMapping"><span class="nav-number">3.1.10.</span> <span class="nav-text">3.1.10 @RequestMapping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-11-RestController"><span class="nav-number">3.1.11.</span> <span class="nav-text">3.1.11 @RestController</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E5%90%AF%E5%8A%A8%E7%B1%BB%E6%B3%A8%E8%A7%A3-SpringBootApplication"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 启动类注解@SpringBootApplication</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-1-SpringBootConfiguration"><span class="nav-number">3.2.1.</span> <span class="nav-text">3.2.1 @SpringBootConfiguration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-2-EnableAutoConfiguration"><span class="nav-number">3.2.2.</span> <span class="nav-text">3.2.2 @EnableAutoConfiguration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-3-EnableTransactionManagement"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.2.3 @EnableTransactionManagement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-4-ComponentScan"><span class="nav-number">3.2.4.</span> <span class="nav-text">3.2.4 @ComponentScan*</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-yml%E9%85%8D%E7%BD%AE"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 yml配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-AOP"><span class="nav-number">4.</span> <span class="nav-text">4. AOP</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-IOC"><span class="nav-number">5.</span> <span class="nav-text">5. IOC</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-user-list-%E4%BB%8Ehtml%E5%88%B0mysql"><span class="nav-number">6.</span> <span class="nav-text">6. user-list 从html到mysql</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-router-cfg-js"><span class="nav-number">6.1.</span> <span class="nav-text">6.1 router-cfg.js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-user-list-html"><span class="nav-number">6.2.</span> <span class="nav-text">6.2 user-list.html</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-user-list-js"><span class="nav-number">6.3.</span> <span class="nav-text">6.3 user-list.js</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-MgrUserController"><span class="nav-number">6.4.</span> <span class="nav-text">6.4 MgrUserController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-5-IMgrUserService"><span class="nav-number">6.5.</span> <span class="nav-text">6.5 IMgrUserService</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-MgrUserServiceImpl"><span class="nav-number">6.6.</span> <span class="nav-text">6.6 MgrUserServiceImpl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-IGdssUserTeUserService"><span class="nav-number">6.7.</span> <span class="nav-text">6.7 IGdssUserTeUserService</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-8-GdssUserTeUserServiceImpl"><span class="nav-number">6.8.</span> <span class="nav-text">6.8 GdssUserTeUserServiceImpl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-9-IGdssUserTeUserMapper"><span class="nav-number">6.9.</span> <span class="nav-text">6.9 IGdssUserTeUserMapper</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-10-mybatis-GdssUserTeUser-xml"><span class="nav-number">6.10.</span> <span class="nav-text">6.10 mybatis-GdssUserTeUser.xml</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">invincible-nerd</p>
  <div class="site-description" itemprop="description">For explorer everywhere</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022-04 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">invincible-nerd</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">685k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">10:22</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
