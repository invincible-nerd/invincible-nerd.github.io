<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"invincible-nerd.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Design题选编251. Flatten 2D VectorFollow up: As an added challenge, try to code it using only iterators in C++ or iterators in Java. 12345678910111213141516171819202122class Vector2D &amp;#123;    List&lt;In">
<meta property="og:type" content="article">
<meta property="og:title" content="Design题">
<meta property="og:url" content="http://invincible-nerd.github.io/2023/02/16/Design%E9%A2%98/index.html">
<meta property="og:site_name" content="IVN">
<meta property="og:description" content="Design题选编251. Flatten 2D VectorFollow up: As an added challenge, try to code it using only iterators in C++ or iterators in Java. 12345678910111213141516171819202122class Vector2D &amp;#123;    List&lt;In">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-02-16T14:56:37.000Z">
<meta property="article:modified_time" content="2023-05-03T05:40:37.021Z">
<meta property="article:author" content="invincible-nerd">
<meta property="article:tag" content="Design">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://invincible-nerd.github.io/2023/02/16/Design%E9%A2%98/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Design题 | IVN</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">IVN</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://invincible-nerd.github.io/2023/02/16/Design%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="invincible-nerd">
      <meta itemprop="description" content="For explorer everywhere">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IVN">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Design题
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 22:56:37" itemprop="dateCreated datePublished" datetime="2023-02-16T22:56:37+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-05-03 13:40:37" itemprop="dateModified" datetime="2023-05-03T13:40:37+08:00">2023-05-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index"><span itemprop="name">LeetCode</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>23k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>21 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Design题选编"><a href="#Design题选编" class="headerlink" title="Design题选编"></a>Design题选编</h1><h2 id="251-Flatten-2D-Vector"><a href="#251-Flatten-2D-Vector" class="headerlink" title="251. Flatten 2D Vector"></a>251. Flatten 2D Vector</h2><p><strong>Follow up:</strong> As an added challenge, try to code it using only <a target="_blank" rel="noopener" href="http://www.cplusplus.com/reference/iterator/iterator/">iterators in C++</a> or <a target="_blank" rel="noopener" href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html">iterators in Java</a>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Vector2D</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;Integer&gt; list;</span><br><span class="line">    Iterator&lt;Integer&gt; iterator;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vector2D</span><span class="params">(<span class="type">int</span>[][] vec)</span> &#123;</span><br><span class="line">        list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span>[] arrs : vec) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> arr : arrs) &#123;</span><br><span class="line">                list.add(arr);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        iterator=list.iterator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> iterator.next();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> iterator.hasNext();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="295-Find-Median-from-Data-Stream"><a href="#295-Find-Median-from-Data-Stream" class="headerlink" title="295. Find Median from Data Stream"></a>295. Find Median from Data Stream</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MedianFinder</span> &#123;</span><br><span class="line"></span><br><span class="line">    PriorityQueue&lt;Integer&gt; firstHalf;</span><br><span class="line">    PriorityQueue&lt;Integer&gt; secondHalf;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MedianFinder</span><span class="params">()</span> &#123;</span><br><span class="line">        firstHalf=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;(b-a));    <span class="comment">//2 1 0</span></span><br><span class="line">        secondHalf=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;();               <span class="comment">//3 4</span></span><br><span class="line">        size=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addNum</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>((size&amp;<span class="number">1</span>)==<span class="number">0</span>)&#123;</span><br><span class="line">            firstHalf.offer(num);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            secondHalf.offer(num);</span><br><span class="line">        &#125;</span><br><span class="line">        size++;</span><br><span class="line">        <span class="keyword">while</span>(!secondHalf.isEmpty() &amp;&amp; secondHalf.peek()&lt;firstHalf.peek())&#123;</span><br><span class="line">            <span class="type">int</span> second=secondHalf.poll();</span><br><span class="line">            <span class="type">int</span> first=firstHalf.poll();</span><br><span class="line">            secondHalf.offer(first);</span><br><span class="line">            firstHalf.offer(second);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">findMedian</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>((size&amp;<span class="number">1</span>)==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> firstHalf.peek();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (firstHalf.peek()+secondHalf.peek())/<span class="number">2.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="308-Range-Sum-Query-2D-Mutable"><a href="#308-Range-Sum-Query-2D-Mutable" class="headerlink" title="308. Range Sum Query 2D - Mutable"></a>308. Range Sum Query 2D - Mutable</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">NumMatrix</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[][] sum;</span><br><span class="line">    <span class="type">int</span> row;</span><br><span class="line">    <span class="type">int</span> col;</span><br><span class="line">    <span class="type">int</span>[][] matrix;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">NumMatrix</span><span class="params">(<span class="type">int</span>[][] matrix)</span> &#123;</span><br><span class="line">        row=matrix.length;</span><br><span class="line">        col=matrix[<span class="number">0</span>].length;</span><br><span class="line">        <span class="built_in">this</span>.matrix=matrix;</span><br><span class="line">        sum=<span class="keyword">new</span> <span class="title class_">int</span>[row][col];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; row; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; col; j++) &#123;</span><br><span class="line">                sum[i][j]=sumRec(i-<span class="number">1</span>,j)+sumRec(i,j-<span class="number">1</span>)+matrix[i][j]-sumRec(i-<span class="number">1</span>,j-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> r, <span class="type">int</span> c, <span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">int</span> delta=val-matrix[r][c];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=r; i&lt;row; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=c; j&lt;col; j++)&#123;</span><br><span class="line">                sum[i][j]+=delta;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        matrix[r][c]=val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sumRegion</span><span class="params">(<span class="type">int</span> row1, <span class="type">int</span> col1, <span class="type">int</span> row2, <span class="type">int</span> col2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> sumRec(row2,col2)+sumRec(row1-<span class="number">1</span>,col1-<span class="number">1</span>)-sumRec(row1-<span class="number">1</span>,col2)-sumRec(row2,col1-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">sumRec</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span> || i&gt;=row || j&lt;<span class="number">0</span> || j&gt;=col)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="348-Design-Tic-Tac-Toe"><a href="#348-Design-Tic-Tac-Toe" class="headerlink" title="348. Design Tic-Tac-Toe"></a>348. Design Tic-Tac-Toe</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TicTacToe</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] row;</span><br><span class="line">    <span class="type">int</span>[] col;</span><br><span class="line">    <span class="type">int</span> diagonal;</span><br><span class="line">    <span class="type">int</span> anti_diagonal;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TicTacToe</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">        row=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        col=<span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        diagonal=<span class="number">0</span>;</span><br><span class="line">        anti_diagonal=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.n=n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">move</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> player)</span> &#123;</span><br><span class="line">        <span class="type">int</span> val=player==<span class="number">2</span> ? -<span class="number">1</span> : <span class="number">1</span>;</span><br><span class="line">        row[i]+=val;</span><br><span class="line">        col[j]+=val;</span><br><span class="line">        <span class="comment">//diagonal : top-left to bottom-right</span></span><br><span class="line">        <span class="comment">//anti-diagonal: top-right to bottom-left</span></span><br><span class="line">        <span class="keyword">if</span>(i==j)&#123;</span><br><span class="line">            diagonal+=val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i+j==n-<span class="number">1</span>)&#123;</span><br><span class="line">            anti_diagonal+=val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(row[i]==n || col[j]==n || diagonal==n || anti_diagonal==n)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(row[i]==-n || col[j]==-n ||diagonal==-n || anti_diagonal==-n)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="384-Shuffle-an-Array"><a href="#384-Shuffle-an-Array" class="headerlink" title="384. Shuffle an Array"></a>384. Shuffle an Array</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] nums;</span><br><span class="line">    <span class="type">int</span>[] origin;</span><br><span class="line">    Random rand=<span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Solution</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums=nums;</span><br><span class="line">        <span class="built_in">this</span>.origin=nums.clone();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] reset() &#123;</span><br><span class="line">        <span class="built_in">this</span>.nums=<span class="built_in">this</span>.origin;</span><br><span class="line">        <span class="built_in">this</span>.origin=<span class="built_in">this</span>.origin.clone();</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] shuffle() &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            swap(i,pick(i,nums.length));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">pick</span><span class="params">(<span class="type">int</span> min, <span class="type">int</span> max)</span>&#123;</span><br><span class="line">        <span class="comment">//[min,max)</span></span><br><span class="line">        <span class="keyword">return</span> rand.nextInt(max-min)+min;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="type">int</span> temp=nums[a];</span><br><span class="line">        nums[a]=nums[b];</span><br><span class="line">        nums[b]=temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="588-Design-In-Memory-File-System"><a href="#588-Design-In-Memory-File-System" class="headerlink" title="588. Design In-Memory File System"></a>588. Design In-Memory File System</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileSystem</span> &#123;</span><br><span class="line"></span><br><span class="line">    Node root;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileSystem</span><span class="params">()</span> &#123;</span><br><span class="line">        root=<span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">ls</span><span class="params">(String path)</span> &#123;</span><br><span class="line">        String[] split = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="comment">//skip split[0] &quot;&quot;</span></span><br><span class="line">        Node node=root;</span><br><span class="line">        String s=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; split.length; i++) &#123;</span><br><span class="line">            s=split[i];</span><br><span class="line">            node=node.children.get(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.content!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(Arrays.asList(s));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(node.children.keySet());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">mkdir</span><span class="params">(String path)</span> &#123;</span><br><span class="line">        getNode(path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addContentToFile</span><span class="params">(String filePath, String content)</span> &#123;</span><br><span class="line">        Node node=getNode(filePath);</span><br><span class="line">        <span class="keyword">if</span>(node.content==<span class="literal">null</span>)&#123;</span><br><span class="line">            node.content=content;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            node.content+=content;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">readContentFromFile</span><span class="params">(String filePath)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getNode(filePath).content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node <span class="title function_">getNode</span><span class="params">(String path)</span>&#123;</span><br><span class="line">        String[] split = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="comment">//skip split[0] &quot;&quot;</span></span><br><span class="line">        Node node=root;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; split.length; i++) &#123;</span><br><span class="line">            String s=split[i];</span><br><span class="line">            <span class="keyword">if</span>(!node.children.containsKey(s))&#123;</span><br><span class="line">                node.children.put(s,<span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">            &#125;</span><br><span class="line">            node=node.children.get(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    String content;</span><br><span class="line">    TreeMap&lt;String,Node&gt; children;</span><br><span class="line">    Node()&#123;</span><br><span class="line">        children=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="1603-Design-Parking-System"><a href="#1603-Design-Parking-System" class="headerlink" title="1603. Design Parking System"></a>1603. Design Parking System</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ParkingSystem</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[] lots;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ParkingSystem</span><span class="params">(<span class="type">int</span> big, <span class="type">int</span> medium, <span class="type">int</span> small)</span> &#123;</span><br><span class="line">        lots=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">4</span>];</span><br><span class="line">        lots[<span class="number">1</span>]=big;</span><br><span class="line">        lots[<span class="number">2</span>]=medium;</span><br><span class="line">        lots[<span class="number">3</span>]=small;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">addCar</span><span class="params">(<span class="type">int</span> carType)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(lots[carType]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            lots[carType]--;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="2102-Sequentially-Ordinal-Rank-Tracker"><a href="#2102-Sequentially-Ordinal-Rank-Tracker" class="headerlink" title="2102. Sequentially Ordinal Rank Tracker"></a>2102. Sequentially Ordinal Rank Tracker</h2><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/sequentially-ordinal-rank-tracker/discuss/1632156/Two-Heaps">https://leetcode.com/problems/sequentially-ordinal-rank-tracker/discuss/1632156/Two-Heaps</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SORTracker</span> &#123;</span><br><span class="line">    PriorityQueue&lt;Pair&lt;String,Integer&gt;&gt; maxHeap;</span><br><span class="line">    PriorityQueue&lt;Pair&lt;String,Integer&gt;&gt; minHeap;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SORTracker</span><span class="params">()</span> &#123;</span><br><span class="line">        maxHeap=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;(!a.getValue().equals(b.getValue()) ? b.getValue()-a.getValue() : a.getKey().compareTo(b.getKey())));</span><br><span class="line">        minHeap=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;(!a.getValue().equals(b.getValue()) ? a.getValue()-b.getValue() : b.getKey().compareTo(a.getKey())));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//minHeap : largest i elements</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(String name, <span class="type">int</span> score)</span> &#123;</span><br><span class="line">        minHeap.offer(<span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(name,score));</span><br><span class="line">        maxHeap.offer(minHeap.poll());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//i = number of get()</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">        Pair pair=maxHeap.poll();</span><br><span class="line">        minHeap.offer(pair);</span><br><span class="line">        <span class="keyword">return</span> (String)pair.getKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="901-Online-Stock-Span"><a href="#901-Online-Stock-Span" class="headerlink" title="901. Online Stock Span"></a>901. Online Stock Span</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StockSpanner</span> &#123;</span><br><span class="line"></span><br><span class="line">    Deque&lt;<span class="type">int</span>[]&gt; stack; <span class="comment">//date,value</span></span><br><span class="line">    <span class="type">int</span> date;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StockSpanner</span><span class="params">()</span> &#123;</span><br><span class="line">        stack=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        date=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//100,80,60,70,60,75,85</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">(<span class="type">int</span> price)</span> &#123;</span><br><span class="line">        date++;</span><br><span class="line">        <span class="keyword">while</span>(!stack.isEmpty() &amp;&amp; stack.peek()[<span class="number">1</span>]&lt;=price)&#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> pre=stack.isEmpty() ? <span class="number">0</span> : stack.peek()[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> res=date-pre;</span><br><span class="line">        stack.push(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;date,price&#125;);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="170-Two-Sum-III-Data-structure-design"><a href="#170-Two-Sum-III-Data-structure-design" class="headerlink" title="170. Two Sum III - Data structure design"></a>170. Two Sum III - Data structure design</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TwoSum</span> &#123;</span><br><span class="line">    Map&lt;Integer,Integer&gt; map;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TwoSum</span><span class="params">()</span> &#123;</span><br><span class="line">        map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> number)</span> &#123;</span><br><span class="line">        map.put(number,map.getOrDefault(number,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">find</span><span class="params">(<span class="type">int</span> value)</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> key : map.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(value-key) &amp;&amp; key*<span class="number">2</span>!=value || key*<span class="number">2</span>==value &amp;&amp; map.get(key)&gt;<span class="number">1</span>)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="281-Zigzag-Iterator"><a href="#281-Zigzag-Iterator" class="headerlink" title="281. Zigzag Iterator"></a>281. Zigzag Iterator</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZigzagIterator</span> &#123;</span><br><span class="line"></span><br><span class="line">    Iterator&lt;Integer&gt; i1;</span><br><span class="line">    Iterator&lt;Integer&gt; i2;</span><br><span class="line">    <span class="type">int</span> turn=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ZigzagIterator</span><span class="params">(List&lt;Integer&gt; v1, List&lt;Integer&gt; v2)</span> &#123;</span><br><span class="line">        i1=v1.listIterator();</span><br><span class="line">        i2=v2.listIterator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(turn==<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i1.hasNext())&#123;</span><br><span class="line">                turn=<span class="number">2</span>;</span><br><span class="line">                <span class="keyword">return</span> i1.next();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> i2.next();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i2.hasNext())&#123;</span><br><span class="line">                turn=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">return</span> i2.next();</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> i1.next();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> i1.hasNext() || i2.hasNext();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Follow up:</strong> What if you are given <code>k</code> vectors? How well can your code be extended to such cases?</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZigzagIterator</span> &#123;</span><br><span class="line"></span><br><span class="line">    Deque&lt;Iterator&gt; list;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ZigzagIterator</span><span class="params">(List&lt;Integer&gt; v1, List&lt;Integer&gt; v2)</span> &#123;</span><br><span class="line">        list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;Iterator&gt;();</span><br><span class="line">        <span class="keyword">if</span>(!v1.isEmpty()) list.offer(v1.iterator());</span><br><span class="line">        <span class="keyword">if</span>(!v2.isEmpty()) list.offer(v2.iterator());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Iterator</span> <span class="variable">poll</span> <span class="operator">=</span> list.poll();</span><br><span class="line">        <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> (Integer)poll.next();</span><br><span class="line">        <span class="keyword">if</span>(poll.hasNext()) list.offer(poll);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> !list.isEmpty();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="346-Moving-Average-from-Data-Stream"><a href="#346-Moving-Average-from-Data-Stream" class="headerlink" title="346. Moving Average from Data Stream"></a>346. Moving Average from Data Stream</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MovingAverage</span> &#123;</span><br><span class="line"></span><br><span class="line">    Deque&lt;Integer&gt; q;</span><br><span class="line">    <span class="type">double</span> sum;</span><br><span class="line">    <span class="type">int</span> size;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MovingAverage</span><span class="params">(<span class="type">int</span> size)</span> &#123;</span><br><span class="line">        q=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        sum=<span class="number">0</span>;</span><br><span class="line">        <span class="built_in">this</span>.size=size;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">next</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        q.offer(val);</span><br><span class="line">        sum+=val;</span><br><span class="line">        <span class="keyword">if</span>(q.size()&gt;size)&#123;</span><br><span class="line">            sum-=q.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum/q.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="359-Logger-Rate-Limiter"><a href="#359-Logger-Rate-Limiter" class="headerlink" title="359. Logger Rate Limiter"></a>359. Logger Rate Limiter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Logger</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String,Integer&gt; map;    <span class="comment">//nextAllowedTime</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Logger</span><span class="params">()</span> &#123;</span><br><span class="line">        map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">shouldPrintMessage</span><span class="params">(<span class="type">int</span> timestamp, String message)</span> &#123;</span><br><span class="line">        <span class="type">boolean</span> res=<span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(message) &amp;&amp; map.get(message)&gt;timestamp)&#123;</span><br><span class="line">            res=<span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(res)&#123;</span><br><span class="line">            map.put(message,timestamp+<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="362-Design-Hit-Counter"><a href="#362-Design-Hit-Counter" class="headerlink" title="362. Design Hit Counter"></a>362. Design Hit Counter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">HitCounter</span> &#123;</span><br><span class="line">    Deque&lt;Integer&gt; q;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HitCounter</span><span class="params">()</span> &#123;</span><br><span class="line">        q=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hit</span><span class="params">(<span class="type">int</span> timestamp)</span> &#123;</span><br><span class="line">        q.offer(timestamp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getHits</span><span class="params">(<span class="type">int</span> timestamp)</span> &#123;</span><br><span class="line">        <span class="comment">//[t-299,t]</span></span><br><span class="line">        <span class="keyword">while</span>(!q.isEmpty() &amp;&amp; q.peek()&lt;timestamp-<span class="number">299</span>)&#123;</span><br><span class="line">            q.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> q.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>Follow up:</strong> What if the number of hits per second could be huge? Does your design scale?</p>
<h2 id="716-Max-Stack"><a href="#716-Max-Stack" class="headerlink" title="716. Max Stack"></a>716. Max Stack</h2><p>并非手撸大根堆</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MaxStack</span> &#123;</span><br><span class="line">    Deque&lt;<span class="type">int</span>[]&gt; stack;</span><br><span class="line">    PriorityQueue&lt;<span class="type">int</span>[]&gt; pq;</span><br><span class="line">    Set&lt;Integer&gt; removed;</span><br><span class="line">    <span class="type">int</span> idx;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MaxStack</span><span class="params">()</span> &#123;</span><br><span class="line">        stack=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        pq=<span class="keyword">new</span> <span class="title class_">PriorityQueue</span>&lt;&gt;((a,b)-&gt;(a[<span class="number">0</span>]!=b[<span class="number">0</span>] ? b[<span class="number">0</span>]-a[<span class="number">0</span>] : b[<span class="number">1</span>]-a[<span class="number">1</span>]));</span><br><span class="line">        removed=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        idx=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">        stack.push(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;x,idx&#125;);</span><br><span class="line">        pq.offer(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;x,idx&#125;);</span><br><span class="line">        idx++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(removed.contains(stack.peek()[<span class="number">1</span>]))&#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] cur=stack.pop();</span><br><span class="line">        removed.add(cur[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> cur[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">top</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(removed.contains(stack.peek()[<span class="number">1</span>]))&#123;</span><br><span class="line">            stack.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.peek()[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">peekMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(removed.contains(pq.peek()[<span class="number">1</span>]))&#123;</span><br><span class="line">            pq.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pq.peek()[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">popMax</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(removed.contains(pq.peek()[<span class="number">1</span>]))&#123;</span><br><span class="line">            pq.poll();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span>[] cur=pq.poll();</span><br><span class="line">        removed.add(cur[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">return</span> cur[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="1166-Design-File-System"><a href="#1166-Design-File-System" class="headerlink" title="1166. Design File System"></a>1166. Design File System</h2><p>注意审题：</p>
<ul>
<li>value不可修改</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FileSystem</span> &#123;</span><br><span class="line">    Node root;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FileSystem</span><span class="params">()</span> &#123;</span><br><span class="line">        root=<span class="keyword">new</span> <span class="title class_">Node</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">createPath</span><span class="params">(String path, <span class="type">int</span> value)</span> &#123;</span><br><span class="line">        String[] split = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        Node node=root;</span><br><span class="line">        <span class="type">int</span> n=split.length;</span><br><span class="line">        <span class="comment">//[&quot;&quot;,&quot;leetcode&quot;]</span></span><br><span class="line">        <span class="comment">//can not modify</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            String s=split[i];</span><br><span class="line">            <span class="keyword">if</span>(node.children.containsKey(s))&#123;</span><br><span class="line">                node=node.children.get(s);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==n-<span class="number">1</span>)&#123;</span><br><span class="line">                    node.children.put(s,<span class="keyword">new</span> <span class="title class_">Node</span>());</span><br><span class="line">                    node=node.children.get(s);</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(node.val!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        node.val=value;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">get</span><span class="params">(String path)</span> &#123;</span><br><span class="line">        String[] split = path.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">        Node node=root;</span><br><span class="line">        <span class="type">int</span> n=split.length;</span><br><span class="line">        <span class="comment">//[&quot;&quot;,&quot;leetcode&quot;]</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            String s=split[i];</span><br><span class="line">            <span class="keyword">if</span>(node.children.containsKey(s))&#123;</span><br><span class="line">                node=node.children.get(s);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> node.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="type">int</span> val;</span><br><span class="line">    Map&lt;String,Node&gt; children;</span><br><span class="line">    Node()&#123;</span><br><span class="line">        children=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="353-Design-Snake-Game"><a href="#353-Design-Snake-Game" class="headerlink" title="353. Design Snake Game"></a>353. Design Snake Game</h2><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/design-snake-game/discuss/82668/Java-Deque-and-HashSet-design-with-detailed-comments">https://leetcode.com/problems/design-snake-game/discuss/82668/Java-Deque-and-HashSet-design-with-detailed-comments</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SnakeGame</span> &#123;</span><br><span class="line"></span><br><span class="line">    Deque&lt;Integer&gt; snake;</span><br><span class="line">    Set&lt;Integer&gt; set;</span><br><span class="line">    <span class="type">int</span>[][] food;</span><br><span class="line">    <span class="type">int</span> row;</span><br><span class="line">    <span class="type">int</span> col;</span><br><span class="line">    <span class="type">int</span> foodIdx;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SnakeGame</span><span class="params">(<span class="type">int</span> width, <span class="type">int</span> height, <span class="type">int</span>[][] food)</span> &#123;</span><br><span class="line">        snake=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        set=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="built_in">this</span>.row=height;</span><br><span class="line">        <span class="built_in">this</span>.col=width;</span><br><span class="line">        <span class="built_in">this</span>.food=food;</span><br><span class="line">        foodIdx=<span class="number">0</span>;</span><br><span class="line">        score=<span class="number">0</span>;</span><br><span class="line">        snake.offerFirst(<span class="number">0</span>);</span><br><span class="line">        set.add(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">move</span><span class="params">(String direction)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(score==-<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> head=snake.isEmpty() ? <span class="number">0</span> : snake.peekFirst();</span><br><span class="line">        <span class="type">int</span> i=head/col;</span><br><span class="line">        <span class="type">int</span> j=head%col;</span><br><span class="line">        <span class="keyword">switch</span> (direction)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;U&quot;</span>:</span><br><span class="line">                i--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;D&quot;</span>:</span><br><span class="line">                i++;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;L&quot;</span>:</span><br><span class="line">                j--;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                j++;</span><br><span class="line">        &#125;</span><br><span class="line">        set.remove(snake.peekLast());</span><br><span class="line">        <span class="type">int</span> next=i*col+j;</span><br><span class="line">        <span class="keyword">if</span>(i&lt;<span class="number">0</span> || i&gt;=row || j&lt;<span class="number">0</span> || j&gt;=col || set.contains(next))&#123;</span><br><span class="line">            score=-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        set.add(next);</span><br><span class="line">        snake.offerFirst(next);</span><br><span class="line">        <span class="keyword">if</span>(foodIdx&lt;food.length)&#123;</span><br><span class="line">            <span class="type">int</span> x=food[foodIdx][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> y=food[foodIdx][<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(x==i &amp;&amp; y==j)&#123;</span><br><span class="line">                set.add(snake.peekLast());</span><br><span class="line">                foodIdx++;</span><br><span class="line">                <span class="keyword">return</span> ++score;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        snake.pollLast();</span><br><span class="line">        <span class="keyword">return</span> score;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="489-Robot-Room-Cleaner"><a href="#489-Robot-Room-Cleaner" class="headerlink" title="489. Robot Room Cleaner"></a>489. Robot Room Cleaner</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LeetCode489</span> &#123;</span><br><span class="line">     <span class="keyword">interface</span> <span class="title class_">Robot</span> &#123;</span><br><span class="line">      <span class="comment">// Returns true if the cell in front is open and robot moves into the cell.</span></span><br><span class="line">              <span class="comment">// Returns false if the cell in front is blocked and robot stays in the current cell.</span></span><br><span class="line">              <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">move</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">              <span class="comment">// Robot will stay in the same cell after calling turnLeft/turnRight.</span></span><br><span class="line">              <span class="comment">// Each turn will be 90 degrees.</span></span><br><span class="line">              <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnLeft</span><span class="params">()</span>;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">turnRight</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">              <span class="comment">// Clean the current cell.</span></span><br><span class="line">              <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clean</span><span class="params">()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; visited=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">     <span class="comment">//clockwise: u, r, d, l</span></span><br><span class="line">     <span class="type">int</span>[][] dirs=<span class="keyword">new</span> <span class="title class_">int</span>[][]&#123;&#123;-<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,<span class="number">1</span>&#125;,&#123;<span class="number">1</span>,<span class="number">0</span>&#125;,&#123;<span class="number">0</span>,-<span class="number">1</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">goBack</span><span class="params">(Robot robot)</span>&#123;</span><br><span class="line">        robot.turnRight();</span><br><span class="line">        robot.turnRight();</span><br><span class="line">        robot.move();</span><br><span class="line">        robot.turnRight();</span><br><span class="line">        robot.turnRight();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">dfs</span><span class="params">(Robot robot, <span class="type">int</span> i, <span class="type">int</span> j, <span class="type">int</span> d)</span>&#123;</span><br><span class="line">        visited.add(i+<span class="string">&quot;,&quot;</span>+j);</span><br><span class="line">        robot.clean();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; <span class="number">4</span>; k++) &#123;</span><br><span class="line">            <span class="type">int</span> idx=(d+k)%<span class="number">4</span>;</span><br><span class="line">            <span class="type">int</span> x=i+dirs[idx][<span class="number">0</span>];</span><br><span class="line">            <span class="type">int</span> y=j+dirs[idx][<span class="number">1</span>];</span><br><span class="line">            String s=x+<span class="string">&quot;,&quot;</span>+y;</span><br><span class="line">            <span class="keyword">if</span>(!visited.contains(s) &amp;&amp; robot.move())&#123;</span><br><span class="line">                dfs(robot,x,y,idx);</span><br><span class="line">                goBack(robot);</span><br><span class="line">            &#125;</span><br><span class="line">            robot.turnRight();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cleanRoom</span><span class="params">(Robot robot)</span> &#123;</span><br><span class="line">        dfs(robot,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="1265-Print-Immutable-Linked-List-in-Reverse"><a href="#1265-Print-Immutable-Linked-List-in-Reverse" class="headerlink" title="1265. Print Immutable Linked List in Reverse"></a>1265. Print Immutable Linked List in Reverse</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">interface</span> <span class="title class_">ImmutableListNode</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printValue</span><span class="params">()</span>; <span class="comment">// print the value of this node.</span></span><br><span class="line">  <span class="keyword">public</span> ImmutableListNode <span class="title function_">getNext</span><span class="params">()</span>; <span class="comment">// return the next node.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">printLinkedListInReverse</span><span class="params">(ImmutableListNode head)</span> &#123;</span><br><span class="line">    ImmutableListNode p=head;</span><br><span class="line">    Deque&lt;ImmutableListNode&gt; stack=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span>(p!=<span class="literal">null</span>)&#123;</span><br><span class="line">        stack.push(p);</span><br><span class="line">        p=p.getNext();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!stack.isEmpty())&#123;</span><br><span class="line">        stack.pop().printValue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Could you solve this problem in:</p>
<ul>
<li>Constant space complexity?<ul>
<li>O(n^2) time complexity, for loop, each time print ith Node</li>
</ul>
</li>
<li>Linear time complexity and less than linear space complexity?<ul>
<li>split into sub linklists</li>
</ul>
</li>
</ul>
<h2 id="1429-First-Unique-Number"><a href="#1429-First-Unique-Number" class="headerlink" title="1429. First Unique Number"></a>1429. First Unique Number</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FirstUnique</span> &#123;</span><br><span class="line"></span><br><span class="line">    Set&lt;Integer&gt; past;</span><br><span class="line">    LinkedHashSet&lt;Integer&gt; set;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FirstUnique</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        past=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        set=<span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">            <span class="keyword">if</span>(!set.contains(num))&#123;</span><br><span class="line">                <span class="keyword">if</span>(!past.contains(num))&#123;</span><br><span class="line">                    set.add(num);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                set.remove(num);</span><br><span class="line">                past.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">showFirstUnique</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(set.size()&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> set.iterator().next();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!set.contains(num))&#123;</span><br><span class="line">            <span class="keyword">if</span>(!past.contains(num))&#123;</span><br><span class="line">                set.add(num);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            set.remove(num);</span><br><span class="line">            past.add(num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="715-Range-Module"><a href="#715-Range-Module" class="headerlink" title="715. Range Module"></a>715. Range Module</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RangeModule</span> &#123;</span><br><span class="line">    TreeMap&lt;Integer,Integer&gt; map;   <span class="comment">//&lt;start,end&gt;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RangeModule</span><span class="params">()</span> &#123;</span><br><span class="line">        map=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addRange</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        <span class="comment">//no overlaps</span></span><br><span class="line">        Integer start=map.floorKey(left);</span><br><span class="line">        <span class="keyword">if</span>(start!=<span class="literal">null</span> &amp;&amp; map.get(start)&gt;=left)&#123;</span><br><span class="line">            left=start;</span><br><span class="line">        &#125;</span><br><span class="line">        Integer end=map.floorKey(right);</span><br><span class="line">        <span class="keyword">if</span>(end!=<span class="literal">null</span> &amp;&amp; map.get(end)&gt;right)&#123;</span><br><span class="line">            right=map.get(end);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//expand the range as far as possible</span></span><br><span class="line">        map.put(left,right);</span><br><span class="line">        <span class="comment">//remove any subrange in between</span></span><br><span class="line">        map.subMap(left,<span class="literal">false</span>,right,<span class="literal">true</span>).clear();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">queryRange</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        Integer start=map.floorKey(left);</span><br><span class="line">        <span class="keyword">return</span> start==<span class="literal">null</span> ? <span class="literal">false</span> : map.get(start)&gt;=right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeRange</span><span class="params">(<span class="type">int</span> left, <span class="type">int</span> right)</span> &#123;</span><br><span class="line">        Integer start=map.floorKey(left);</span><br><span class="line">        Integer end=map.floorKey(right);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//can not reverse order</span></span><br><span class="line">        <span class="keyword">if</span>(end!=<span class="literal">null</span> &amp;&amp; map.get(end)&gt;right)&#123;</span><br><span class="line">            map.put(right,map.get(end));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(start!=<span class="literal">null</span> &amp;&amp; map.get(start)&gt;left)&#123;</span><br><span class="line">            map.put(start,left);</span><br><span class="line">        &#125;</span><br><span class="line">        map.subMap(left,<span class="literal">true</span>,right,<span class="literal">false</span>).clear();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="1352-Product-of-the-Last-K-Numbers"><a href="#1352-Product-of-the-Last-K-Numbers" class="headerlink" title="1352. Product of the Last K Numbers"></a>1352. Product of the Last K Numbers</h2><p>思路：</p>
<ul>
<li>与prefix sum不同，0之前的所有prefix product无意义，遇0则清</li>
<li>队头设初值1,便于计算</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ProductOfNumbers</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;Integer&gt; prefix;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ProductOfNumbers</span><span class="params">()</span> &#123;</span><br><span class="line">        prefix=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        prefix.add(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(num==<span class="number">0</span>)&#123;</span><br><span class="line">            prefix.clear();</span><br><span class="line">            prefix.add(<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            prefix.add(prefix.get(prefix.size()-<span class="number">1</span>)*num);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getProduct</span><span class="params">(<span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> n=prefix.size();</span><br><span class="line">        <span class="comment">//last k: [n-k,n-1]</span></span><br><span class="line">        <span class="keyword">return</span> n&gt;k ? prefix.get(n-<span class="number">1</span>)/prefix.get(n-k-<span class="number">1</span>) : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="895-Maximum-Frequency-Stack"><a href="#895-Maximum-Frequency-Stack" class="headerlink" title="895. Maximum Frequency Stack"></a>895. Maximum Frequency Stack</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FreqStack</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;Integer,Integer&gt; numToFreq;</span><br><span class="line">    Map&lt;Integer, Deque&lt;Integer&gt;&gt; freqToStack;</span><br><span class="line">    <span class="type">int</span> maxFreq;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FreqStack</span><span class="params">()</span> &#123;</span><br><span class="line">        numToFreq=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        freqToStack=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        maxFreq=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">push</span><span class="params">(<span class="type">int</span> val)</span> &#123;</span><br><span class="line">        <span class="type">int</span> f=numToFreq.getOrDefault(val,<span class="number">0</span>);</span><br><span class="line">        f++;</span><br><span class="line">        maxFreq=Math.max(maxFreq,f);</span><br><span class="line">        freqToStack.putIfAbsent(f,<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;());</span><br><span class="line">        numToFreq.put(val,f);</span><br><span class="line">        freqToStack.get(f).push(val);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> x=freqToStack.get(maxFreq).pop();</span><br><span class="line">        numToFreq.put(x,maxFreq-<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(freqToStack.get(maxFreq).isEmpty())&#123;</span><br><span class="line">            maxFreq--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> x;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="1628-Design-an-Expression-Tree-With-Evaluate-Function"><a href="#1628-Design-an-Expression-Tree-With-Evaluate-Function" class="headerlink" title="1628. Design an Expression Tree With Evaluate Function"></a>1628. Design an Expression Tree With Evaluate Function</h2><p> <strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Binary_expression_tree">binary expression tree</a></strong></p>
<p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/design-an-expression-tree-with-evaluate-function/discuss/1209901/Java-Factory-method-pattern">https://leetcode.com/problems/design-an-expression-tree-with-evaluate-function/discuss/1209901/Java-Factory-method-pattern</a></p>
<p>factory pattern</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Deque;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This is the interface for the expression tree Node.</span></span><br><span class="line"><span class="comment"> * You should not remove it, and you can define some classes to implement it.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="type">int</span> <span class="title function_">evaluate</span><span class="params">()</span>;</span><br><span class="line">    <span class="comment">// define your fields here</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Node <span class="title function_">from</span><span class="params">(String s)</span>&#123;</span><br><span class="line">        <span class="keyword">switch</span> (s)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AddNode</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SubtractNode</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MultiplyNode</span>();</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;/&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DivideNode</span>();</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NumberNode</span>(s);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">OperatorNode</span> <span class="keyword">extends</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> Node left;</span><br><span class="line">    <span class="keyword">protected</span> Node right;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLeft</span><span class="params">(Node left)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.left=left;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRight</span><span class="params">(Node right)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.right=right;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AddNode</span> <span class="keyword">extends</span> <span class="title class_">OperatorNode</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evaluate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> left.evaluate()+right.evaluate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SubtractNode</span> <span class="keyword">extends</span> <span class="title class_">OperatorNode</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evaluate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> left.evaluate()-right.evaluate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MultiplyNode</span> <span class="keyword">extends</span> <span class="title class_">OperatorNode</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evaluate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> left.evaluate()*right.evaluate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DivideNode</span> <span class="keyword">extends</span> <span class="title class_">OperatorNode</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evaluate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> left.evaluate()/ right.evaluate();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NumberNode</span> <span class="keyword">extends</span> <span class="title class_">Node</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String val;</span><br><span class="line"></span><br><span class="line">    NumberNode(String val)&#123;</span><br><span class="line">        <span class="built_in">this</span>.val=val;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">evaluate</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.valueOf(val);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This is the TreeBuilder class.</span></span><br><span class="line"><span class="comment"> * You can treat it as the driver code that takes the postinfix input</span></span><br><span class="line"><span class="comment"> * and returns the expression tree represnting it as a Node.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TreeBuilder</span> &#123;</span><br><span class="line">    Node <span class="title function_">buildTree</span><span class="params">(String[] postfix)</span> &#123;</span><br><span class="line">        Deque&lt;Node&gt; stack=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String s : postfix) &#123;</span><br><span class="line">            Node n=Node.from(s);</span><br><span class="line">            <span class="keyword">if</span>(n <span class="keyword">instanceof</span> NumberNode)&#123;</span><br><span class="line">                stack.push(n);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(n <span class="keyword">instanceof</span> OperatorNode)&#123;</span><br><span class="line">                OperatorNode op=(OperatorNode)n;</span><br><span class="line">                op.setRight(stack.pop());</span><br><span class="line">                op.setLeft(stack.pop());</span><br><span class="line">                stack.push(op);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stack.pop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your TreeBuilder object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * TreeBuilder obj = new TreeBuilder();</span></span><br><span class="line"><span class="comment"> * Node expTree = obj.buildTree(postfix);</span></span><br><span class="line"><span class="comment"> * int ans = expTree.evaluate();</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>





<h2 id="2336-Smallest-Number-in-Infinite-Set"><a href="#2336-Smallest-Number-in-Infinite-Set" class="headerlink" title="2336. Smallest Number in Infinite Set"></a>2336. Smallest Number in Infinite Set</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SmallestInfiniteSet</span> &#123;</span><br><span class="line"></span><br><span class="line">    Set&lt;Integer&gt; poped;</span><br><span class="line">    <span class="type">int</span> smallest;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SmallestInfiniteSet</span><span class="params">()</span> &#123;</span><br><span class="line">        poped=<span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;();</span><br><span class="line">        smallest=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">popSmallest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(poped.contains(smallest))&#123;</span><br><span class="line">            smallest++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> p=smallest;</span><br><span class="line">        poped.add(smallest);</span><br><span class="line">        smallest++;</span><br><span class="line">        <span class="keyword">return</span> p;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addBack</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(poped.contains(num))&#123;</span><br><span class="line">            poped.remove(num);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(num&lt;smallest)&#123;</span><br><span class="line">            smallest=num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="981-Time-Based-Key-Value-Store"><a href="#981-Time-Based-Key-Value-Store" class="headerlink" title="981. Time Based Key-Value Store"></a>981. Time Based Key-Value Store</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TimeMap</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;String, TreeMap&lt;Integer,String&gt;&gt; keyToMap;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TimeMap</span><span class="params">()</span> &#123;</span><br><span class="line">        keyToMap=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(String key, String value, <span class="type">int</span> timestamp)</span> &#123;</span><br><span class="line">        keyToMap.putIfAbsent(key,<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;());</span><br><span class="line">        keyToMap.get(key).put(timestamp,value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">get</span><span class="params">(String key, <span class="type">int</span> timestamp)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(!keyToMap.containsKey(key))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">k</span> <span class="operator">=</span> keyToMap.get(key).floorKey(timestamp);</span><br><span class="line">        <span class="keyword">return</span> k==<span class="literal">null</span> ? <span class="string">&quot;&quot;</span> : keyToMap.get(key).get(k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="2034-Stock-Price-Fluctuation"><a href="#2034-Stock-Price-Fluctuation" class="headerlink" title="2034. Stock Price Fluctuation"></a>2034. Stock Price Fluctuation</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">StockPrice</span> &#123;</span><br><span class="line"></span><br><span class="line">    TreeMap&lt;Integer,Integer&gt; map;</span><br><span class="line">    TreeMap&lt;Integer,Integer&gt; count;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StockPrice</span><span class="params">()</span> &#123;</span><br><span class="line">        map=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">        count=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(<span class="type">int</span> timestamp, <span class="type">int</span> price)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(map.containsKey(timestamp))&#123;</span><br><span class="line">            <span class="type">int</span> old=map.get(timestamp);</span><br><span class="line">            <span class="type">int</span> c=count.get(old);</span><br><span class="line">            <span class="keyword">if</span>(c==<span class="number">1</span>)&#123;</span><br><span class="line">                count.remove(old);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                count.put(old,c-<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(timestamp,price);</span><br><span class="line">        count.put(price,count.getOrDefault(price,<span class="number">0</span>)+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">current</span><span class="params">()</span> &#123;</span><br><span class="line">        Integer last=map.lastKey();</span><br><span class="line">        <span class="keyword">return</span> map.get(last);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maximum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count.lastKey();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">minimum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> count.firstKey();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="729-My-Calendar-I"><a href="#729-My-Calendar-I" class="headerlink" title="729. My Calendar I"></a>729. My Calendar I</h2><p>Google似乎很喜欢考TreeMap</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyCalendar</span> &#123;</span><br><span class="line"></span><br><span class="line">    TreeMap&lt;Integer,Integer&gt; map;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyCalendar</span><span class="params">()</span> &#123;</span><br><span class="line">        map=<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">book</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="type">int</span> st=start;</span><br><span class="line">        <span class="type">int</span> ed=end;</span><br><span class="line">        Integer floor=map.floorKey(st);</span><br><span class="line">        Integer ceil=map.ceilingKey(st);</span><br><span class="line">        <span class="keyword">if</span>(floor!=<span class="literal">null</span> &amp;&amp; map.get(floor)&gt;st ||</span><br><span class="line">            ceil!=<span class="literal">null</span> &amp;&amp; ceil&lt;ed)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(floor!=<span class="literal">null</span> &amp;&amp; map.get(floor)==st)&#123;</span><br><span class="line">            start=floor;</span><br><span class="line">            map.remove(floor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ceil!=<span class="literal">null</span> &amp;&amp; ceil==ed)&#123;</span><br><span class="line">            end=map.get(ceil);</span><br><span class="line">            map.remove(ceil);</span><br><span class="line">        &#125;</span><br><span class="line">        map.put(start,end);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="1570-Dot-Product-of-Two-Sparse-Vectors"><a href="#1570-Dot-Product-of-Two-Sparse-Vectors" class="headerlink" title="1570. Dot Product of Two Sparse Vectors"></a>1570. Dot Product of Two Sparse Vectors</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SparseVector</span> &#123;</span><br><span class="line"></span><br><span class="line">    Map&lt;Integer,Integer&gt; map;</span><br><span class="line">    SparseVector(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">        map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i]!=<span class="number">0</span>)&#123;</span><br><span class="line">                map.put(i,nums[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Return the dotProduct of two sparse vectors</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">dotProduct</span><span class="params">(SparseVector vec)</span> &#123;</span><br><span class="line">        <span class="type">int</span> res=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (Integer i : vec.map.keySet()) &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.map.containsKey(i))&#123;</span><br><span class="line">                res+=vec.map.get(i)*<span class="built_in">this</span>.map.get(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>invincible-nerd
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://invincible-nerd.github.io/2023/02/16/Design%E9%A2%98/" title="Design题">http://invincible-nerd.github.io/2023/02/16/Design题/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Design/" rel="tag"># Design</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/02/13/Array-3/" rel="prev" title="Array-3">
      <i class="fa fa-chevron-left"></i> Array-3
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/02/22/String%E5%A5%BD%E9%A2%98-3/" rel="next" title="String好题(3)">
      String好题(3) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Design%E9%A2%98%E9%80%89%E7%BC%96"><span class="nav-number">1.</span> <span class="nav-text">Design题选编</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#251-Flatten-2D-Vector"><span class="nav-number">1.1.</span> <span class="nav-text">251. Flatten 2D Vector</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#295-Find-Median-from-Data-Stream"><span class="nav-number">1.2.</span> <span class="nav-text">295. Find Median from Data Stream</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#308-Range-Sum-Query-2D-Mutable"><span class="nav-number">1.3.</span> <span class="nav-text">308. Range Sum Query 2D - Mutable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#348-Design-Tic-Tac-Toe"><span class="nav-number">1.4.</span> <span class="nav-text">348. Design Tic-Tac-Toe</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#384-Shuffle-an-Array"><span class="nav-number">1.5.</span> <span class="nav-text">384. Shuffle an Array</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#588-Design-In-Memory-File-System"><span class="nav-number">1.6.</span> <span class="nav-text">588. Design In-Memory File System</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1603-Design-Parking-System"><span class="nav-number">1.7.</span> <span class="nav-text">1603. Design Parking System</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2102-Sequentially-Ordinal-Rank-Tracker"><span class="nav-number">1.8.</span> <span class="nav-text">2102. Sequentially Ordinal Rank Tracker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#901-Online-Stock-Span"><span class="nav-number">1.9.</span> <span class="nav-text">901. Online Stock Span</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#170-Two-Sum-III-Data-structure-design"><span class="nav-number">1.10.</span> <span class="nav-text">170. Two Sum III - Data structure design</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#281-Zigzag-Iterator"><span class="nav-number">1.11.</span> <span class="nav-text">281. Zigzag Iterator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#346-Moving-Average-from-Data-Stream"><span class="nav-number">1.12.</span> <span class="nav-text">346. Moving Average from Data Stream</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#359-Logger-Rate-Limiter"><span class="nav-number">1.13.</span> <span class="nav-text">359. Logger Rate Limiter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#362-Design-Hit-Counter"><span class="nav-number">1.14.</span> <span class="nav-text">362. Design Hit Counter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#716-Max-Stack"><span class="nav-number">1.15.</span> <span class="nav-text">716. Max Stack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1166-Design-File-System"><span class="nav-number">1.16.</span> <span class="nav-text">1166. Design File System</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#353-Design-Snake-Game"><span class="nav-number">1.17.</span> <span class="nav-text">353. Design Snake Game</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#489-Robot-Room-Cleaner"><span class="nav-number">1.18.</span> <span class="nav-text">489. Robot Room Cleaner</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1265-Print-Immutable-Linked-List-in-Reverse"><span class="nav-number">1.19.</span> <span class="nav-text">1265. Print Immutable Linked List in Reverse</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1429-First-Unique-Number"><span class="nav-number">1.20.</span> <span class="nav-text">1429. First Unique Number</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#715-Range-Module"><span class="nav-number">1.21.</span> <span class="nav-text">715. Range Module</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1352-Product-of-the-Last-K-Numbers"><span class="nav-number">1.22.</span> <span class="nav-text">1352. Product of the Last K Numbers</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#895-Maximum-Frequency-Stack"><span class="nav-number">1.23.</span> <span class="nav-text">895. Maximum Frequency Stack</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1628-Design-an-Expression-Tree-With-Evaluate-Function"><span class="nav-number">1.24.</span> <span class="nav-text">1628. Design an Expression Tree With Evaluate Function</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2336-Smallest-Number-in-Infinite-Set"><span class="nav-number">1.25.</span> <span class="nav-text">2336. Smallest Number in Infinite Set</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#981-Time-Based-Key-Value-Store"><span class="nav-number">1.26.</span> <span class="nav-text">981. Time Based Key-Value Store</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2034-Stock-Price-Fluctuation"><span class="nav-number">1.27.</span> <span class="nav-text">2034. Stock Price Fluctuation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#729-My-Calendar-I"><span class="nav-number">1.28.</span> <span class="nav-text">729. My Calendar I</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1570-Dot-Product-of-Two-Sparse-Vectors"><span class="nav-number">1.29.</span> <span class="nav-text">1570. Dot Product of Two Sparse Vectors</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">invincible-nerd</p>
  <div class="site-description" itemprop="description">For explorer everywhere</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">80</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2022-04 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">invincible-nerd</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">1m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">15:27</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
